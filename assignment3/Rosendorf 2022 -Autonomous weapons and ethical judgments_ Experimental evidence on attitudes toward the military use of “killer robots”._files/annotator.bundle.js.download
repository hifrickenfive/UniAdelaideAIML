var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(){function t(t){var e=!0,n=!1,o=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function r(t){return!!(t&&t!==document&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"classList"in t&&"contains"in t.classList)}function s(t){var e=t.type,n=t.tagName;return!("INPUT"!==n||!i[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}function a(t){t.classList.contains("focus-visible")||(t.classList.add("focus-visible"),t.setAttribute("data-focus-visible-added",""))}function c(t){t.hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added"))}function l(n){n.metaKey||n.altKey||n.ctrlKey||(r(t.activeElement)&&a(t.activeElement),e=!0)}function h(t){e=!1}function u(t){
r(t.target)&&(e||s(t.target))&&a(t.target)}function d(t){r(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(o),o=window.setTimeout((function(){n=!1}),100),c(t.target))}function f(t){"hidden"===document.visibilityState&&(n&&(e=!0),p())}function p(){document.addEventListener("mousemove",m),document.addEventListener("mousedown",m),document.addEventListener("mouseup",m),document.addEventListener("pointermove",m),document.addEventListener("pointerdown",m),document.addEventListener("pointerup",m),document.addEventListener("touchmove",m),document.addEventListener("touchstart",m),document.addEventListener("touchend",m)}function g(){document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",m),document.removeEventListener("mouseup",m),document.removeEventListener("pointermove",m),document.removeEventListener("pointerdown",m),document.removeEventListener("pointerup",m),
document.removeEventListener("touchmove",m),document.removeEventListener("touchstart",m),document.removeEventListener("touchend",m)}function m(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e=!1,g())}document.addEventListener("keydown",l,!0),document.addEventListener("mousedown",h,!0),document.addEventListener("pointerdown",h,!0),document.addEventListener("touchstart",h,!0),document.addEventListener("visibilitychange",f,!0),p(),t.addEventListener("focus",u,!0),t.addEventListener("blur",d,!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("data-js-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var e;window.applyFocusVisiblePolyfill=t;try{e=new CustomEvent("focus-visible-polyfill-ready")}catch(t){
(e=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(e)}"undefined"!=typeof document&&t(document)}();var e,n,o,i,r,s,a={},c=[],l=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function h(t,e){for(var n in e)t[n]=e[n];return t}function u(t){var e=t.parentNode;e&&e.removeChild(t)}function d(t,e,i,r,s){var a={type:t,props:e,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++o:s};return null==s&&null!=n.vnode&&n.vnode(a),a}function f(t){return t.children}function p(t,e){this.props=t,this.context=e}function g(t,e){if(null==e)return t.__?g(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?g(t):null}function m(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return m(t)}}
function _(t){(!t.__d&&(t.__d=!0)&&i.push(t)&&!v.__r++||s!==n.debounceRendering)&&((s=n.debounceRendering)||r)(v)}function v(){for(var t;v.__r=i.length;)t=i.sort((function(t,e){return t.__v.__b-e.__v.__b})),i=[],t.some((function(t){var e,n,o,i,r,s;t.__d&&(r=(i=(e=t).__v).__e,(s=e.__P)&&(n=[],(o=h({},i)).__v=i.__v+1,T(s,i,o,e.__n,void 0!==s.ownerSVGElement,null!=i.__h?[r]:null,n,null==r?g(i):r,i.__h),A(n,i),i.__e!=r&&m(i)))}))}function y(t,e,n,o,i,r,s,l,h,u){var p,m,_,v,y,C,x,S=o&&o.__k||c,E=S.length;for(n.__k=[],p=0;p<e.length;p++)if(null!=(v=n.__k[p]=null==(v=e[p])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v||"bigint"==typeof v?d(null,v,null,null,v):Array.isArray(v)?d(f,{children:v},null,null,null):v.__b>0?d(v.type,v.props,v.key,null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(_=S[p])||_&&v.key==_.key&&v.type===_.type)S[p]=void 0;else for(m=0;m<E;m++){if((_=S[m])&&v.key==_.key&&v.type===_.type){S[m]=void 0;break}_=null}T(t,v,_=_||a,i,r,s,l,h,u),y=v.__e,(m=v.ref)&&_.ref!=m&&(x||(x=[]),
_.ref&&x.push(_.ref,null,v),x.push(m,v.__c||y,v)),null!=y?(null==C&&(C=y),"function"==typeof v.type&&v.__k===_.__k?v.__d=h=w(v,h,t):h=b(t,v,_,S,y,h),"function"==typeof n.type&&(n.__d=h)):h&&_.__e==h&&h.parentNode!=t&&(h=g(_))}for(n.__e=C,p=E;p--;)null!=S[p]&&("function"==typeof n.type&&null!=S[p].__e&&S[p].__e==n.__d&&(n.__d=g(o,p+1)),P(S[p],S[p]));if(x)for(p=0;p<x.length;p++)R(x[p],x[++p],x[++p])}function w(t,e,n){for(var o,i=t.__k,r=0;i&&r<i.length;r++)(o=i[r])&&(o.__=t,e="function"==typeof o.type?w(o,e,n):b(n,o,o,i,o.__e,e));return e}function b(t,e,n,o,i,r){var s,a,c;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(null==n||i!=r||null==i.parentNode)t:if(null==r||r.parentNode!==t)t.appendChild(i),s=null;else{for(a=r,c=0;(a=a.nextSibling)&&c<o.length;c+=2)if(a==i)break t;t.insertBefore(i,r),s=r}return void 0!==s?s:i.nextSibling}function C(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||l.test(e)?n:n+"px"}function x(t,e,n,o,i){var r
;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof o&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||C(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||C(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o||t.addEventListener(e,r?E:S,r):t.removeEventListener(e,r?E:S,r);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function S(t){this.l[t.type+!1](n.event?n.event(t):t)}function E(t){this.l[t.type+!0](n.event?n.event(t):t)}function T(t,e,o,i,r,s,a,c,l){var u,d,g,m,_,v,w,b,C,x,S,E=e.type;if(void 0!==e.constructor)return null;null!=o.__h&&(l=o.__h,c=e.__e=o.__e,e.__h=null,s=[c]),(u=n.__b)&&u(e)
;try{t:if("function"==typeof E){if(b=e.props,C=(u=E.contextType)&&i[u.__c],x=u?C?C.props.value:u.__:i,o.__c?w=(d=e.__c=o.__c).__=d.__E:("prototype"in E&&E.prototype.render?e.__c=d=new E(b,x):(e.__c=d=new p(b,x),d.constructor=E,d.render=L),C&&C.sub(d),d.props=b,d.state||(d.state={}),d.context=x,d.__n=i,g=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=E.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=h({},d.__s)),h(d.__s,E.getDerivedStateFromProps(b,d.__s))),m=d.props,_=d.state,g)null==E.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==E.getDerivedStateFromProps&&b!==m&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,x),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,x)||e.__v===o.__v){d.props=b,d.state=d.__s,e.__v!==o.__v&&(d.__d=!1),d.__v=e,e.__e=o.__e,e.__k=o.__k,e.__k.forEach((function(t){t&&(t.__=e)})),d.__h.length&&a.push(d);break t}
null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,x),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(m,_,v)}))}d.context=x,d.props=b,d.state=d.__s,(u=n.__r)&&u(e),d.__d=!1,d.__v=e,d.__P=t,u=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(i=h(h({},i),d.getChildContext())),g||null==d.getSnapshotBeforeUpdate||(v=d.getSnapshotBeforeUpdate(m,_)),S=null!=u&&u.type===f&&null==u.key?u.props.children:u,y(t,Array.isArray(S)?S:[S],e,o,i,r,s,a,c,l),d.base=e.__e,e.__h=null,d.__h.length&&a.push(d),w&&(d.__E=d.__=null),d.__e=!1}else null==s&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=k(o.__e,e,o,i,r,s,a,l);(u=n.diffed)&&u(e)}catch(t){e.__v=null,(l||null!=s)&&(e.__e=c,e.__h=!!l,s[s.indexOf(c)]=null),n.__e(t,e,o)}}function A(t,e){n.__c&&n.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){n.__e(t,e.__v)}}))}function k(t,n,o,i,r,s,c,l){var h,d,f,p=o.props,m=n.props,_=n.type,v=0;if("svg"===_&&(r=!0),
null!=s)for(;v<s.length;v++)if((h=s[v])&&"setAttribute"in h==!!_&&(_?h.localName===_:3===h.nodeType)){t=h,s[v]=null;break}if(null==t){if(null===_)return document.createTextNode(m);t=r?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,m.is&&m),s=null,l=!1}if(null===_)p===m||l&&t.data===m||(t.data=m);else{if(s=s&&e.call(t.childNodes),d=(p=o.props||a).dangerouslySetInnerHTML,f=m.dangerouslySetInnerHTML,!l){if(null!=s)for(p={},v=0;v<t.attributes.length;v++)p[t.attributes[v].name]=t.attributes[v].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===t.innerHTML)||(t.innerHTML=f&&f.__html||""))}if(function(t,e,n,o,i){var r;for(r in n)"children"===r||"key"===r||r in e||x(t,r,null,n[r],o);for(r in e)i&&"function"!=typeof e[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===e[r]||x(t,r,e[r],n[r],o)}(t,m,p,r,l),f)n.__k=[];else if(v=n.props.children,y(t,Array.isArray(v)?v:[v],n,o,i,r&&"foreignObject"!==_,s,c,s?s[0]:o.__k&&g(o,0),l),
null!=s)for(v=s.length;v--;)null!=s[v]&&u(s[v]);l||("value"in m&&void 0!==(v=m.value)&&(v!==t.value||"progress"===_&&!v||"option"===_&&v!==p.value)&&x(t,"value",v,p.value,!1),"checked"in m&&void 0!==(v=m.checked)&&v!==t.checked&&x(t,"checked",v,p.checked,!1))}return t}function R(t,e,o){try{"function"==typeof t?t(e):t.current=e}catch(t){n.__e(t,o)}}function P(t,e,o){var i,r;if(n.unmount&&n.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||R(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){n.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&P(i[r],e,"function"!=typeof t.type);o||null==t.__e||u(t.__e),t.__e=t.__d=void 0}function L(t,e,n){return this.constructor(t,n)}function M(t,o,i){var r,s,c;n.__&&n.__(t,o),s=(r="function"==typeof i)?null:i&&i.__k||o.__k,c=[],T(o,t=(!r&&i||o).__k=function(t,n,o){var i,r,s,a={};for(s in n)"key"==s?i=n[s]:"ref"==s?r=n[s]:a[s]=n[s];if(arguments.length>2&&(a.children=arguments.length>3?e.call(arguments,2):o),
"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===a[s]&&(a[s]=t.defaultProps[s]);return d(t,a,i,r,null)}(f,null,[t]),s||a,a,void 0!==o.ownerSVGElement,!r&&i?[i]:s?null:o.firstChild?e.call(o.childNodes):null,c,!r&&i?i:s?s.__e:o.firstChild,r),A(c,t)}e=c.slice,n={__e:function(t,e){for(var n,o,i;e=e.__;)if((n=e.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(t)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t),i=n.__d),i)return n.__E=n}catch(e){t=e}throw t}},o=0,p.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=h({},this.state),"function"==typeof t&&(t=t(h({},n),this.props)),t&&h(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),_(this))},p.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),_(this))},p.prototype.render=f,i=[],r="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,v.__r=0,
"undefined"!=typeof window&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.6.6",n,{Fragment:f,Component:p});var N={};function O(t){return t.type===f?"Fragment":"function"==typeof t.type?t.type.displayName||t.type.name:"string"==typeof t.type?t.type:"#text"}var I=[],D=[];function B(){return I.length>0?I[I.length-1]:null}var F=!1;function V(t){return"function"==typeof t.type&&t.type!=f}function H(t){for(var e=[t],n=t;null!=n.__o;)e.push(n.__o),n=n.__o;return e.reduce((function(t,e){t+="  in "+O(e);var n=e.__source;return n?t+=" (at "+n.fileName+":"+n.lineNumber+")":F||(F=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),t+"\n"}),"")}var q="function"==typeof WeakMap,U=p.prototype.setState;p.prototype.setState=function(t,e){
return null==this.__v?null==this.state&&console.warn('Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.\n\n'+H(B())):null==this.__P&&console.warn('Can\'t call "this.setState" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.\n\n'+H(this.__v)),U.call(this,t,e)};var W=p.prototype.forceUpdate;function z(t){var e=t.props,n=O(t),o="";for(var i in e)if(e.hasOwnProperty(i)&&"children"!==i){var r=e[i];"function"==typeof r&&(r="function "+(r.displayName||r.name)+"() {}"),r=Object(r)!==r||r.toString?r+"":Object.prototype.toString.call(r),o+=" "+i+"="+JSON.stringify(r)}var s=e.children;return"<"+n+o+(s&&s.length?">..</"+n+">":" />")}p.prototype.forceUpdate=function(t){
return null==this.__v?console.warn('Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.\n\n'+H(B())):null==this.__P&&console.warn('Can\'t call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.\n\n'+H(this.__v)),W.call(this,t)},function(){!function(){var t=n.__b,e=n.diffed,o=n.__,i=n.vnode,r=n.__r;n.diffed=function(t){V(t)&&D.pop(),I.pop(),e&&e(t)},n.__b=function(e){V(e)&&I.push(e),t&&t(e)},n.__=function(t,e){D=[],o&&o(t,e)},n.vnode=function(t){t.__o=D.length>0?D[D.length-1]:null,i&&i(t)},n.__r=function(t){V(t)&&D.push(t),r&&r(t)}}();var t=!1,e=n.__b,o=n.diffed,i=n.vnode,r=n.__e,s=n.__,a=n.__h,c=q?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,l=[];n.__e=function(t,e,n){if(e&&e.__c&&"function"==typeof t.then){var o=t
;t=new Error("Missing Suspense. The throwing component was: "+O(e));for(var i=e;i;i=i.__)if(i.__c&&i.__c.__c){t=o;break}if(t instanceof Error)throw t}try{r(t,e,n),"function"!=typeof t.then&&setTimeout((function(){throw t}))}catch(t){throw t}},n.__=function(t,e){if(!e)throw new Error("Undefined parent passed to render(), this is the second argument.\nCheck if the element is available in the DOM/has the correct id.");var n;switch(e.nodeType){case 1:case 11:case 9:n=!0;break;default:n=!1}if(!n){var o=O(t);throw new Error("Expected a valid HTML node as a second argument to render.\tReceived "+e+" instead: render(<"+o+" />, "+e+");")}s&&s(t,e)},n.__b=function(n){var o=n.type,i=function t(e){return e?"function"==typeof e.type?t(e.__):e:{}}(n.__);if(t=!0,void 0===o)throw new Error("Undefined component passed to createElement()\n\nYou likely forgot to export your component or might have mixed up default and named imports"+z(n)+"\n\n"+H(n));if(null!=o&&"object"==typeof o){
if(void 0!==o.__k&&void 0!==o.__e)throw new Error("Invalid type passed to createElement(): "+o+"\n\nDid you accidentally pass a JSX literal as JSX twice?\n\n  let My"+O(n)+" = "+z(o)+";\n  let vnode = <My"+O(n)+" />;\n\nThis usually happens when you export a JSX literal and not the component.\n\n"+H(n));throw new Error("Invalid type passed to createElement(): "+(Array.isArray(o)?"array":o))}if("thead"!==o&&"tfoot"!==o&&"tbody"!==o||"table"===i.type?"tr"===o&&"thead"!==i.type&&"tfoot"!==i.type&&"tbody"!==i.type&&"table"!==i.type?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+z(n)+"\n\n"+H(n)):"td"===o&&"tr"!==i.type?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+z(n)+"\n\n"+H(n)):"th"===o&&"tr"!==i.type&&console.error("Improper nesting of table. Your <th> should have a <tr>."+z(n)+"\n\n"+H(n)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+z(n)+"\n\n"+H(n)),
void 0!==n.ref&&"function"!=typeof n.ref&&"object"!=typeof n.ref&&!("$$typeof"in n))throw new Error('Component\'s "ref" property should be a function, or an object created by createRef(), but got ['+typeof n.ref+"] instead\n"+z(n)+"\n\n"+H(n));if("string"==typeof n.type)for(var r in n.props)if("o"===r[0]&&"n"===r[1]&&"function"!=typeof n.props[r]&&null!=n.props[r])throw new Error("Component's \""+r+'" property should be a function, but got ['+typeof n.props[r]+"] instead\n"+z(n)+"\n\n"+H(n));if("function"==typeof n.type&&n.type.propTypes){if("Lazy"===n.type.displayName&&c&&!c.lazyPropTypes.has(n.type)){var s="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var a=n.type();c.lazyPropTypes.set(n.type,!0),console.warn(s+"Component wrapped in lazy() is "+O(a))}catch(n){console.warn(s+"We will log the wrapped component's name once it is loaded.")}}var l=n.props;n.type.__f&&delete(l=function(t,e){for(var n in e)t[n]=e[n];return t}({},l)).ref,function(t,e,n,o,i){
Object.keys(t).forEach((function(n){var r;try{r=t[n](e,n,o,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(t){r=t}!r||r.message in N||(N[r.message]=!0,console.error("Failed prop type: "+r.message+(i&&"\n"+i()||"")))}))}(n.type.propTypes,l,0,O(n),(function(){return H(n)}))}e&&e(n)},n.__h=function(e,n,o){if(!e||!t)throw new Error("Hook can only be invoked from render methods.");a&&a(e,n,o)};var h=function(t,e){return{get:function(){var n="get"+t+e;l&&l.indexOf(n)<0&&(l.push(n),console.warn("getting vnode."+t+" is deprecated, "+e))},set:function(){var n="set"+t+e;l&&l.indexOf(n)<0&&(l.push(n),console.warn("setting vnode."+t+" is not allowed, "+e))}}},u={nodeName:h("nodeName","use vnode.type"),attributes:h("attributes","use vnode.props"),children:h("children","use vnode.props.children")},d=Object.create({},u);n.vnode=function(t){var e=t.props;if(null!==t.type&&null!=e&&("__source"in e||"__self"in e)){var n=t.props={};for(var o in e){var r=e[o]
;"__source"===o?t.__source=r:"__self"===o?t.__self=r:n[o]=r}}t.__proto__=d,i&&i(t)},n.diffed=function(e){if(e.__k&&e.__k.forEach((function(t){if(t&&void 0===t.type){delete t.__,delete t.__b;var n=Object.keys(t).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+n+"}.\n\n"+H(e))}})),t=!1,o&&o(e),null!=e.__k)for(var n=[],i=0;i<e.__k.length;i++){var r=e.__k[i];if(r&&null!=r.key){var s=r.key;if(-1!==n.indexOf(s)){console.error('Following component has two or more children with the same key attribute: "'+s+'". This may cause glitches and misbehavior in rendering process. Component: \n\n'+z(e)+"\n\n"+H(e));break}n.push(s)}}}}();var $,j={exports:{}};$=j,function(){var t={}.hasOwnProperty;function e(){for(var n=[],o=0;o<arguments.length;o++){var i=arguments[o];if(i){var r=typeof i;if("string"===r||"number"===r)n.push(i);else if(Array.isArray(i)){if(i.length){var s=e.apply(null,i);s&&n.push(s)}
}else if("object"===r)if(i.toString===Object.prototype.toString)for(var a in i)t.call(i,a)&&i[a]&&n.push(a);else n.push(i.toString())}}return n.join(" ")}$.exports?(e.default=e,$.exports=e):window.classNames=e}();var X,Y,G,Z=j.exports,K=0,J=[],Q=n.__b,tt=n.__r,et=n.diffed,nt=n.__c,ot=n.unmount;function it(t,e){n.__h&&n.__h(Y,t,K||e),K=0;var o=Y.__H||(Y.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({}),o.__[t]}function rt(t){return K=1,function(t,e,n){var o=it(X++,2);return o.t=t,o.__c||(o.__=[n?n(e):pt(void 0,e),function(t){var e=o.t(o.__[0],t);o.__[0]!==e&&(o.__=[e,o.__[1]],o.__c.setState({}))}],o.__c=Y),o.__}(pt,t)}function st(t,e){var o=it(X++,3);!n.__s&&ft(o.__H,e)&&(o.__=t,o.__H=e,Y.__H.__h.push(o))}function at(t,e){var o=it(X++,4);!n.__s&&ft(o.__H,e)&&(o.__=t,o.__H=e,Y.__h.push(o))}function ct(t){return K=5,function(t,e){var n=it(X++,7);return ft(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}((function(){return{current:t}}),[])}function lt(){for(var t;t=J.shift();)if(t.__P)try{t.__H.__h.forEach(ut),
t.__H.__h.forEach(dt),t.__H.__h=[]}catch(e){t.__H.__h=[],n.__e(e,t.__v)}}n.__b=function(t){Y=null,Q&&Q(t)},n.__r=function(t){tt&&tt(t),X=0;var e=(Y=t.__c).__H;e&&(e.__h.forEach(ut),e.__h.forEach(dt),e.__h=[])},n.diffed=function(t){et&&et(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==J.push(e)&&G===n.requestAnimationFrame||((G=n.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(o),ht&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);ht&&(e=requestAnimationFrame(n))})(lt)),Y=null},n.__c=function(t,e){e.some((function(t){try{t.__h.forEach(ut),t.__h=t.__h.filter((function(t){return!t.__||dt(t)}))}catch(o){e.some((function(t){t.__h&&(t.__h=[])})),e=[],n.__e(o,t.__v)}})),nt&&nt(t,e)},n.unmount=function(t){ot&&ot(t);var e,o=t.__c;o&&o.__H&&(o.__H.__.forEach((function(t){try{ut(t)}catch(t){e=t}})),e&&n.__e(e,o.__v))};var ht="function"==typeof requestAnimationFrame;function ut(t){var e=Y,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),Y=e}function dt(t){var e=Y;t.__c=t.__(),Y=e}
function ft(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function pt(t,e){return"function"==typeof e?e(t):e}var gt=0;function mt(t,e,o,i,r){var s,a,c={};for(a in e)"ref"==a?s=e[a]:c[a]=e[a];var l={type:t,props:c,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--gt,__source:i,__self:r};if("function"==typeof t&&(s=t.defaultProps))for(a in s)void 0===c[a]&&(c[a]=s[a]);return n.vnode&&n.vnode(l),l}const _t=new Map;function vt({name:t,className:e="",inline:n=!1,title:o=""}){const i=_t.get(t);if(!i)throw new Error(`Icon "${t.toString()}" is not registered`);const r=ct();at((()=>{const t=r.current.querySelector("svg");t&&t.setAttribute("class",e)}),[e,i]);const s={};return o&&(s.title=o),mt("span",{className:Z("Hyp-SvgIcon",{"Hyp-SvgIcon--inline":n}),dangerouslySetInnerHTML:{__html:i},ref:r,...s},void 0,!1,{fileName:"/home/runner/work/frontend-shared/frontend-shared/src/components/SvgIcon.js",lineNumber:69,columnNumber:5})}
function yt(t,e){const n="string"==typeof t?Symbol(t):t;return _t.set(n,e),n}var wt="/home/runner/work/frontend-shared/frontend-shared/src/components/buttons.js";function bt({buttonRef:t,classes:e,className:n,icon:o,iconPosition:i="left",size:r="medium",variant:s="normal",expanded:a,pressed:c,type:l="button",...h}){var u;const d=null!==(u=null==h?void 0:h.role)&&void 0!==u?u:"button",f={"aria-label":h.title};return"tab"===d?f["aria-selected"]=c:(f["aria-pressed"]=c,f["aria-expanded"]=a),mt("button",{ref:t,className:Z(n,`${n}--${r}`,`${n}--${s}`,{[`${n}--icon-${i}`]:o},e),type:l,...f,...h},void 0,!1,{fileName:wt,lineNumber:82,columnNumber:5})}function Ct({className:t="Hyp-IconButton",...e}){const{icon:n}=e;return mt(bt,{className:t,...e,children:mt(vt,{name:n},void 0,!1,{fileName:wt,lineNumber:109,columnNumber:7})},void 0,!1,{fileName:wt,lineNumber:108,columnNumber:5})}function xt({children:t,className:e="Hyp-LabeledButton",...n}){const{icon:o,iconPosition:i="left"}=n;return mt(bt,{className:e,...n,
children:[o&&"left"===i&&mt(vt,{name:o},void 0,!1,{fileName:wt,lineNumber:127,columnNumber:43}),t,o&&"right"===i&&mt(vt,{name:o},void 0,!1,{fileName:wt,lineNumber:129,columnNumber:44})]},void 0,!0,{fileName:wt,lineNumber:126,columnNumber:5})}yt("checkbox",'  <svg\n    width="32"\n    height="32"\n    viewBox="-4 -4 39 39"\n    aria-hidden="true"\n    focusable="false"\n  >\n    <rect\n      class="hyp-svg-checkbox--background"\n      width="35"\n      height="35"\n      x="-2"\n      y="-2"\n      stroke="currentColor"\n      fill="none"\n      stroke-width="3"\n      rx="5"\n      ry="5"\n    />\n    <polyline\n      class="hyp-svg-checkbox--checkmark"\n      points="4,14 12,23 28,5"\n      stroke="transparent"\n      stroke-width="5"\n      fill="none"\n    />\n</svg>')
;var St='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 8l3.536-3.536L8 8 4.464 4.464 8 8zm0 0l-3.536 3.536L8 8l3.536 3.536L8 8z"></path></g></svg>\n';yt("cancel",St);function Et({name:t,classes:e="",containerClasses:n="",title:o=""}){const i=_t.get(t);if(!i)throw new Error(`Icon "${t.toString()}" is not registered`);const r=ct();at((()=>{const t=r.current.querySelector("svg");t&&t.setAttribute("class",Z("Hyp-Icon",e))}),[e,i]);const s={};return o&&(s.title=o),mt("span",{className:n,dangerouslySetInnerHTML:{__html:i},ref:r,...s},void 0,!1,{fileName:"/home/runner/work/frontend-shared/frontend-shared/src/components/Icon.js",lineNumber:60,columnNumber:5})}function Tt({children:t,classes:e="",linkRef:n,...o}){return mt("a",{
className:Z("Hyp-Link",e),ref:n,rel:"noopener noreferrer",...o,children:t},void 0,!1,{fileName:"/home/runner/work/frontend-shared/frontend-shared/src/components/Link.js",lineNumber:24,columnNumber:5})}yt("cancel",St)
;yt("spinner",'<svg viewBox="0 0 64 64">\n  <g stroke-width="6" stroke="currentColor" stroke-linecap="round">\n    <line y1="16" y2="28" transform="translate(32,32) rotate(180)">\n      <animate attributeName="stroke-opacity" dur="750ms" values="0;1;.8;.65;.45;.3;.15;0" repeatCount="indefinite"></animate>\n    </line>\n    <line y1="16" y2="28" transform="translate(32,32) rotate(225)">\n      <animate attributeName="stroke-opacity" dur="750ms" values=".15;0;1;.8;.65;.45;.3;.15" repeatCount="indefinite"></animate>\n    </line>\n    <line y1="16" y2="28" transform="translate(32,32) rotate(270)">\n      <animate attributeName="stroke-opacity" dur="750ms" values=".3;.15;0;1;.8;.65;.45;.3" repeatCount="indefinite"></animate>\n    </line>\n    <line y1="16" y2="28" transform="translate(32,32) rotate(315)">\n      <animate attributeName="stroke-opacity" dur="750ms" values=".45;.3;.15;0;1;.85;.65;.45" repeatCount="indefinite"></animate>\n    </line>\n    <line y1="16" y2="28" transform="translate(32,32) rotate(0)">\n      <animate attributeName="stroke-opacity" dur="750ms" values=".65;.45;.3;.15;0;1;.8;.65;" repeatCount="indefinite"></animate>\n    </line>\n    <line y1="16" y2="28" transform="translate(32,32) rotate(45)">\n      <animate attributeName="stroke-opacity" dur="750ms" values=".8;.65;.45;.3;.15;0;1;.8" repeatCount="indefinite"></animate>\n    </line>\n    <line y1="16" y2="28" transform="translate(32,32) rotate(90)">\n      <animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.6;.45;.3;.15;0;1;" repeatCount="indefinite"></animate>\n    </line>\n    <line y1="16" y2="28" transform="translate(32,32) rotate(135)">\n      <animate attributeName="stroke-opacity" dur="750ms" values="0;1;.8;.65;.45;.3;.15;0" repeatCount="indefinite"></animate>\n    </line>\n  </g>\n</svg>')
;const At={
annotate:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path fill="currentColor" fill-rule="nonzero" d="M15 0c.27 0 .505.099.703.297A.961.961 0 0116 1v15l-4-3H1a.974.974 0 01-.703-.29A.953.953 0 010 12V1C0 .719.096.482.29.29A.966.966 0 011 0h14zM7 3l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C4.156 5.229 4 6 4 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188C4.729 8.854 5.082 9 5.5 9c.417 0 .77-.146 1.063-.438C6.854 8.271 7 7.918 7 7.5c0-.417-.146-.77-.438-1.063A1.447 1.447 0 005.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L7 4V3zm5 0l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C9.156 5.229 9 6 9 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188c.291.291.645.437 1.062.437.417 0 .77-.146 1.063-.438.291-.291.437-.645.437-1.062 0-.417-.146-.77-.438-1.063A1.447 1.447 0 0010.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L12 4V3z"/>\n</svg>\n',
cancel:St,caution:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',"caret-left":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 12L6 8l4-4"></path></g></svg>',
"caret-right":'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 4l4 4-4 4"></path></g></svg>',
hide:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><path fill="currentColor" d="M1.61289944,0.209704612 L1.70710678,0.292893219 L15.7071068,14.2928932 C16.0976311,14.6834175 16.0976311,15.3165825 15.7071068,15.7071068 C15.3466228,16.0675907 14.7793918,16.0953203 14.3871006,15.7902954 L14.2928932,15.7071068 L0.292893219,1.70710678 C-0.0976310729,1.31658249 -0.0976310729,0.683417511 0.292893219,0.292893219 C0.65337718,-0.0675907428 1.22060824,-0.0953202783 1.61289944,0.209704612 Z M2.19604887,5.05494269 C2.65878442,5.35642943 2.78950241,5.97595401 2.48801567,6.43868956 C2.16488794,6.93464068 2,7.46139686 2,8 C2,10.1228856 4.62796016,12 8,12 C8.22060643,12 8.4396701,11.9919023 8.65660209,11.9758355 C9.20737829,11.9350431 9.68693944,12.3484666 9.72773191,12.8992428 C9.76852437,13.450019 9.35510087,13.9295801 8.80432467,13.9703726 C8.53822524,13.9900809 8.26988704,14 8,14 C3.64005335,14 0,11.3999619 0,8 C0,7.06308249 0.28281658,6.15958778 0.812302005,5.34690949 C1.11378875,4.88417394 1.73331332,4.75345595 2.19604887,5.05494269 Z M8,2 C12.3599467,2 16,4.6000381 16,8 C16,8.93691751 15.7171834,9.84041222 15.187698,10.6530905 C14.8862113,11.1158261 14.2666867,11.246544 13.8039511,10.9450573 C13.3412156,10.6435706 13.2104976,10.024046 13.5119843,9.56131044 C13.8351121,9.06535932 14,8.53860314 14,8 C14,5.8771144 11.3720398,4 8,4 C7.77939357,4 7.5603299,4.00809769 7.34339791,4.02416445 C6.79262171,4.06495692 6.31306056,3.65153342 6.27226809,3.10075722 C6.23147563,2.54998102 6.64489913,2.07041987 7.19567533,2.02962741 C7.46177476,2.00991913 7.73011296,2 8,2 Z"></path></svg>',
highlight:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><g fill-rule="evenodd"><rect fill="none" stroke="none" x="0" y="0" width="16" height="16"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15H1h11zm-.5-6v2l-1 1v-2l1-1zm.5-7v6h-2V2h2zm0-1h-2 2zm0 8h-2 2z"></path></g></svg>',
jstor:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 25.2.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 970 250" xml:space="preserve" width="96" height="25">\n<style type="text/css">\n\t.st0{clip-path:url(#SVGID_2_);fill:#990000;}\n</style>\n<g>\n\t<path class="st0" d="M448,112.8c-17.1-11.5-33.3-22.4-33.3-43.7c0-12.6,7.6-26.1,28.8-26.1c18.3,0,29.7,9.2,33.2,26.7\n\t\tc0.1,0.4,0.4,0.7,0.8,0.7h1.4c0.2,0,0.4-0.1,0.6-0.3c0.2-0.2,0.2-0.4,0.2-0.6c-0.2-3.5-0.2-9.5-0.2-13c0-6,0.2-10.2,0.7-15.6\n\t\tc0-0.2-0.1-0.5-0.3-0.7c-0.2-0.2-0.5-0.2-0.7-0.2c-1.4,0.2-2.5,0.2-4,0.2c-4.2,0-8.3-0.8-12.7-1.6c-5.5-1-11.7-2.2-19.5-2.2\n\t\tc-26.9,0-45.7,17.9-45.7,43.4c0,26.9,19.3,39.8,37.9,52.2c17.9,11.9,34.9,23.2,34.9,46.1c0,21.6-16.2,31.3-32.2,31.3\n\t\tc-18.5,0-37.3-10-37.3-29.2c0-1.6,0.2-3.3,0.4-5.1l0.1-0.8c0-0.2-0.1-0.5-0.2-0.6c-0.2-0.2-0.4-0.3-0.6-0.3H399\n\t\tc-0.3,0-0.6,0.2-0.8,0.5c-2.8,6.1-3,13.3-3,15.3c0,3.1,0.3,5.9,0.6,8.7c0.3,2.6,0.6,5.1,0.6,7.8c0,2.1,0,4.9-0.2,6\n\t\tc-0.1,0.3,0,0.5,0.2,0.7c0.2,0.2,0.5,0.3,0.7,0.2c1.4-0.2,2.1-0.2,3.5-0.2c5.3,0,9.6,1,14.3,2c5.5,1.2,11.8,2.6,20.7,2.6\n\t\tc30.2,0,51.3-20.2,51.3-49.1C486.9,138.9,467.1,125.6,448,112.8"/>\n\t<path class="st0" d="M779.9,128.7c0,50-25.3,81.1-66,81.1c-40.3,0-64.3-30.9-64.3-82.6c0-38.6,16.8-83.8,64.3-83.8\n\t\tC744.3,43.5,779.9,65.8,779.9,128.7 M715.8,36.5c-56.8,0-90.8,46.5-90.8,91.4c0,43.8,33.2,89,88.8,89c50.6,0,90.3-39.4,90.3-89.7\n\t\tC804.1,76.4,765.4,36.5,715.8,36.5"/>\n\t<path class="st0" d="M903.2,89.3c0,27.6-14.4,40.5-45.3,40.5h-11.3V45.6c7.2-1.9,12-2.3,17.4-2.3C887.8,43.4,903.2,61.4,903.2,89.3\n\t\t M953.3,214c-14.7-5-31.8-34.9-44.3-56.7c-7.1-12.4-12.8-22.5-16.9-26.3c21.4-8.1,34.1-24.7,34.1-44.8c0-30.4-23.8-50-60.6-50\n\t\tc-2.6,0-6.8,0.1-11.3,0.2c-5.1,0.1-11,0.3-15.1,0.3c-11.1,0-15.7,0-24.3-0.5c-0.2,0-0.4,0.1-0.6,0.2c-0.2,0.2-0.3,0.4-0.3,0.6v1.2\n\t\tc0,0.4,0.3,0.7,0.7,0.8c8.6,1.3,11.5,4.6,11.5,21.6v132.1c0,19.7-3.3,20.2-12,21.6c-0.4,0.1-0.7,0.4-0.7,0.8v1.2\n\t\tc0,0.2,0.1,0.4,0.3,0.6c0.2,0.2,0.4,0.3,0.6,0.2c5.1-0.2,12.2-0.5,22-0.5c10.4,0,18.9,0.3,22,0.5c0.2,0,0.4-0.1,0.6-0.2\n\t\tc0.2-0.2,0.3-0.4,0.3-0.6V215c0-0.4-0.3-0.7-0.7-0.8c-8.7-1.4-12-1.9-12-21.6v-56H862c2.8,0,6.3-0.3,10.4-0.9\n\t\tc4.5,4.1,9.6,13.7,12.7,19.5c0.7,1.2,1.2,2.3,1.7,3.1c29.7,54.7,33,58,59.8,59c3.1,0,4.1,0,6.4-0.2c0.4,0,0.7-0.4,0.7-0.8v-1.5\n\t\tC953.8,214.4,953.6,214.1,953.3,214"/>\n\t<path class="st0" d="M631.1,37.3c0.1-0.2,0-0.5-0.1-0.7c-0.2-0.2-0.4-0.3-0.7-0.3c-11.9,0.2-74.2,1.2-130.2,0\n\t\tc-0.4,0-0.7,0.2-0.8,0.6c-1.1,4.5-2.3,8.4-3.3,12.1c-1.3,4.6-2.6,8.9-3.5,13.4c0,0.2,0,0.5,0.2,0.7c0.2,0.2,0.4,0.3,0.6,0.3h1.2\n\t\tc0.3,0,0.6-0.2,0.7-0.5c7.2-15.2,18.9-15.3,57.4-15.3v145c0,19.7-3.2,20.2-11.8,21.6c-0.4,0.1-0.7,0.4-0.7,0.8v1.2\n\t\tc0,0.2,0.1,0.4,0.3,0.6c0.2,0.2,0.4,0.2,0.6,0.2c5.1-0.2,12.1-0.5,21.8-0.5c10.3,0,18.6,0.3,21.8,0.5c0,0,0,0,0,0\n\t\tc0.2,0,0.4-0.1,0.6-0.2c0.2-0.2,0.3-0.4,0.3-0.6v-1.2c0-0.4-0.3-0.7-0.7-0.8c-8.6-1.4-11.8-1.9-11.8-21.6v-145\n\t\tc44.1,0,50,1.7,50,8.3c0,1.2-0.3,2.6-0.5,3.5c-0.1,0.2,0,0.5,0.1,0.7c0.2,0.2,0.4,0.3,0.6,0.3h1.5c0.4,0,0.7-0.3,0.8-0.7\n\t\tC626.1,55.8,628.9,43.9,631.1,37.3"/>\n\t<path class="st0" d="M380.4,36.3c-4.9,0.2-14.6,0.5-23,0.5c-8.8,0-18.7-0.2-23.9-0.5c-0.2,0-0.4,0.1-0.6,0.2\n\t\tc-0.2,0.2-0.3,0.4-0.3,0.6v1.2c0,0.4,0.3,0.7,0.7,0.8c8.7,1.4,14.4,2.2,14.4,20.8v107.2c0,20.2-9.8,42-25.8,42\n\t\tc-2.9,0-5.7-0.2-8.4-0.7c-11.1-2.7-17.9-10.3-22.1-15.7c-0.6-0.8-1.1-1.5-1.7-2.3c-4.6-6.6-6.7-12.5-6.7-12.7\n\t\tc-0.2-0.5-0.7-0.8-1.3-0.7c-0.6,0.1-0.9,0.7-0.9,1.2l3.7,28.2c0,0.4,0.2,0.7,0.5,0.9c10.3,6.6,23.2,8.6,25.7,8.8l0,0\n\t\tc4.1,0.6,7.4,0.8,9.6,0.8c1.6,0,2.5-0.1,2.6-0.1c26.5,0,44.3-21.1,44.3-52.4V59.9c0-18,4.4-18.9,13-20.7l0.5-0.1\n\t\tc0.4-0.1,0.7-0.4,0.7-0.8v-1.2c0-0.2-0.1-0.4-0.3-0.6C380.9,36.3,380.6,36.2,380.4,36.3"/>\n\t<path class="st0" d="M160.4,77.5l-6.3-3.8c0.9-3.9,4.9-20,14.9-30.6c10.3-10.9,22.6-14.5,33.5-14.6c5.9-0.1,11.4,0.8,15.9,1.8\n\t\tc0.5,0.1,1,0.2,1.5,0.3c4.3,0.9,8.8,1.8,12,1c1.7-0.4,3.2-1.1,4.3-1.6c0.7-0.3,1.4-0.7,1.5-0.6c0,0,0,0,0.1,0.1\n\t\tc0.2,0.7-0.5,2.8-2.5,5.5c-1.3,1.7-2.8,2.7-3.9,3.4c-1,0.6-1.7,1.1-1.7,1.7c0,0.3,0.3,0.9,0.9,2c1.9,3.4,5.9,10.5,5.5,20.5\n\t\tc-0.7,15.4-8.2,22-13.2,26.3l-0.6,0.5l-0.1,0c-3.3,3.7-2.9,7.1-1.9,9.4c1.4,3.4,4.6,6.1,8.7,7.5c2.4,0.8,4.9,1.1,6.8,1.3\n\t\tc1.4,0.2,2.7,0.3,2.9,0.6c0.4,0.9-0.8,2.4-3.6,4.2c-2.1,1.3-4.3,1.6-4.3,1.6c-0.1,0-0.1,0.1-0.1,0.1c0,0.1,0,0.1,0.1,0.2\n\t\tc0.1,0,5.7,4.8,6.2,11.3c0.6,6.6-0.4,10.2-3.8,13.3c-2.7,2.5-6.6,2.9-8.1,2.5c-0.3-0.1-0.4-0.2-0.4-0.2c-0.2-0.8,1.1-1.7,2.5-2.7\n\t\tc0.3-0.2,0.7-0.5,1-0.7c1.9-1.3,3-3.6,2.4-4.8c-0.2-0.4-0.6-0.5-1-0.4c-0.3,0-0.7,0.1-1.1,0.2c-0.8,0.2-1.6,0.5-2,0\n\t\tc-0.5-0.5-0.3-0.9,0.1-1.7c0.3-0.7,0.7-1.5,0.8-2.6c0.2-2.5-0.1-9.1-3.7-9.8c-0.1,0-0.3,0-0.4,0.1c-0.3,0.3-0.4,1.1-0.4,2.4\n\t\tc0,1.7-0.1,3.9-1,5.4c-1.5,2.3-3.9,4.1-5.1,4.1c-0.3,0-0.4-0.1-0.5-0.2c-0.2-0.2,0-0.7,0.1-1.5c0.4-1.9,1.1-5.4,0.1-12\n\t\tc-0.4-2.3-1.8-4.8-3.1-7.2c-1.3-2.3-2.5-4.5-2.8-6.4c-0.5-3.5-0.1-5,1.9-6.5c1.2-0.9,1.4-1.7,1.4-2.2c0-0.5-0.3-1.5-1.3-1.9\n\t\tc0,0-0.1,0-0.1,0c0,0,0,0,0,0c-0.5-0.1-1.3-0.2-2.2-0.2c-3.8,0-12.7,0.1-19-8.2c-5.1-6.8-5.5-13.2-4.5-20.6c0,0,0,0,0-0.1\n\t\tc0-0.1-0.6-2.9-3-5.1c-1.2-1-2.3-1.6-3.2-2c-0.5-0.2-1-0.5-1-0.6c0,0,0-0.1,0.1-0.2c0.6-0.6,2.8-1.5,5.7-1.1\n\t\tc2.2,0.3,3.8,1.2,3.8,1.2c0.1,0,0.2,0,0.2,0c0.1-0.1,5.8-6.8,15.5-6c5.8,0.4,11.3,6,11.4,12c0.1,6.1-2.7,9.2-5.2,10\n\t\tc-2,0.7-3.9,0.6-5-0.1c-0.5-0.4-0.8-0.8-0.8-1.4c0-0.5,0.4-0.8,1.3-1.2c1.4-0.7,3.5-1.7,3.8-5.5c0.1-1.9-0.6-3.9-1.8-5.3\n\t\tc-0.9-1-2.5-2.1-5.1-2c-3.4,0.1-6.1,1.5-8,3.8c-2.4,3-3.2,7.6-2.3,13c1.3,7.8,9,13.2,17.4,12.3c5-0.5,9.6-3.2,13.1-7.7\n\t\tc3.3-4.2,5.2-9.6,5.3-14.8c0.2-13-7.5-26.4-25.1-27c-16.8-0.6-27.2,9.6-32,15.7c-3,3.8-6.1,11-8.3,16.9c1-0.2,4.3-0.6,7.2,0.8\n\t\tc2.9,1.4,6.4,4.9,5.8,6.4c-0.2,0.4-1.1,0.2-2.3-0.1c-1.7-0.4-4.1-0.3-6.9,0C162.8,76.2,160.9,77.1,160.4,77.5 M235.6,165.7\n\t\tc-1.5,8.7-6.6,12.4-10.8,13c-0.3,0-0.7,0.1-1,0.1c-1.2,0-2.2-0.3-2.5-0.9c-0.1-0.2-0.1-0.4-0.1-0.6c0.1-0.3,0.6-0.5,1.3-0.8\n\t\tc0.8-0.3,2-0.7,3.2-1.7c3.6-2.8,3.4-4.1,3.3-5c0-0.1-0.1-0.2-0.1-0.2c-0.2-0.1-0.8,0.2-1.4,0.5l-0.3,0.1c-0.8,0.4-1.6,0.5-2.2,0.2\n\t\tc-0.3-0.2-0.6-0.5-0.6-0.8c-0.1-0.4,0.4-0.8,1-1.3c0.5-0.4,1-0.9,1.4-1.4c1.8-2.9,2.2-6.3,0.8-9c-1.1-2-2.6-3.9-7-4.3\n\t\tc-0.1,0-0.2,0-0.3,0c0,0-0.1,0-0.2,0c-0.6,0-1.2,0.1-1.8,0.2c-4.9,0.9-8.3,4.2-10.5,7.7c0,0-0.1,0.1-0.1,0.2\n\t\tc-3,4.4-3.8,11.1-4,12.5l0,0c-1,6.2-3,15.3-16.2,31.3c-1.5,1.8-2.7,4.5-1.9,7.4c1.4,5.1,6.4,5.6,6.4,6.1c0,0.7-1.1,0.8-3,0.6\n\t\tc-1.9-0.1-2.5-0.7-2.5-0.7s-0.5,1.2,2.6,3.4c2.4,1.7,5,1.6,5.1,2.3c0.1,0.9-14.6,4.2-15.5-10.3c0-0.3,0-0.7-0.1-1\n\t\tc-15.8,14.2-20.4,14.9-21.6,13.4c-0.5-0.7,1-0.6,4-3.9c3.1-3.4,3.2-5,3.2-5s-6.2,3.3-13.3,2.6c-7.3-0.6-13.4-5.7-12.9-7.7\n\t\tc0.4-1.7,4.7,1.2,10,0.4c4.8-0.7,5.3-2.6,5.3-2.6s-0.9,0-2.5-1.6c-1.6-1.6-3.9-2.9-2.6-4.3c0.8-0.8,4.4,0.8,8,0.8\n\t\tc4.6,0,7.5-1,7.5-1s-1.9-0.7-3.8-2.5c-2-1.9-2.4-3.8-1.8-4.3c0.3-0.3,1.1,1.2,3.6,1.2c3-0.1,3.3-0.7,3.3-0.7s-1.3-1.1-1.8-2.2\n\t\tc-0.6-1.1-2.3-4.4-1.2-5.6c0.3-0.4,3.7,3.7,8.7,4.1c8.5,0.8,17.9-5.9,17.9-5.9s-4.6,5.6-14.5,13.9c-6.3,5.3-14.2,9.6-13.8,10.6\n\t\tc0.5,1.2,6.8-0.2,17.5-9c3.4-2.8,5.6-4.7,10.3-10.3c8.3-10,10.2-21,8.5-29.8l0,0c-0.7-3.4-1.6-6.6-2.7-9.2\n\t\tc-4.6-9.8-9.6-14.5-17.9-17.7c-7.4-2.8-13.1-0.2-16.5,1.3c-1.7,0.8-2.9,1.3-3.4,0.6c-1.5-2.1,1.5-4.9,4.2-7.5\n\t\tc3.4-3.2,5.7-4.5,6.3-4.8c-0.6-0.3-2.9-1.4-5-1.5c-1.1-0.1-2.4,0.1-3.5,0.3c-1.7,0.3-3.1,0.5-3.3-0.4c-0.4-1.7,6.7-4.7,10.5-6\n\t\tc3.9-1.3,7-1.4,7.5-1.4c-0.1-0.8-0.7-7.2,0-16.4c0.4-4.9,1.3-8.3,2-10.3c0.9-2.5,1.9-4.2,2.9-4.7c0.4-0.2,0.7-0.2,1,0\n\t\tc0.6,0.4,0.6,1.6,0.6,3.5c0,1.2,0,2.6,0.1,4.2c0.4,4.6,2,7.2,2.8,7.8c0.2,0.1,0.3,0.1,0.4,0.1c0.3-0.2,0.4-0.7,0.6-1.6\n\t\tc0.2-1.1,0.4-2.6,1.4-4.5c1.5-3.1,4.5-6.9,5.6-6.6c0.3,0.1,0.4,0.4,0.3,0.9c-0.1,1.5-0.3,2.8-0.6,4.1c-0.5,2.8-1,6-0.7,12\n\t\tc0.4,8.7,4.6,9.9,5.1,10c0.3-0.4,2.3-3.9,5.2-6.9c0.6-0.6,1.2-1.3,1.8-1.9c1.8-2,3.3-3.6,4.3-3.6c0,0,0.1,0,0.1,0\n\t\tc0.3,0,0.5,0.2,0.7,0.5c0.4,0.6-0.2,2-1.2,4.3c-1.3,3.2-3.3,8-4.2,13.9c-1.6,11.3,0,22.2,0,22.3l0.1,0.8l-0.3-0.7\n\t\tc0,0-1-2.7-5.1-8.5c-1.8-2.6-3.3-4.2-4.6-5.7c-1.8-1.9-3.4-3.7-5.7-7.4c-2.7-4.4-3.3-7.6-3.7-9.8c-0.4-1.8-0.5-2.7-1.6-2.8\n\t\tc-0.1,0-0.2,0.1-0.3,0.2c-0.9,1.4-0.4,9.3,2,14c1.3,2.5,2.9,4.5,4.7,6.8c1.9,2.4,4,5,6.5,9.1c4.6,7.4,6.9,12.8,8,16.1\n\t\tc0.3,0.8,0.5,1.5,0.7,2.1c0.6-1.1,1.5-2.4,1.7-2.6c8.2-8.8,15.3-9.4,20.2-8.3l0.1,0c3.6,0.7,6.7,2.7,8.9,5.8\n\t\tC235.2,157.1,236.3,161.6,235.6,165.7 M233.8,210c0,0,0,0.1-0.1,0.2c-1.8,6.2-5.7,10.5-11,12.1c-1.7,0.5-3.2,0.7-4.7,0.7\n\t\tc-3.6,0-6.6-1.4-9.9-3.4c-0.2,0-2-0.3-3.8,0.7c-0.9,0.5-1.6,1.2-2.1,1.6c-0.4,0.4-0.7,0.7-0.9,0.6c-0.1,0-0.2-0.1-0.3-0.3\n\t\tc-0.3-0.7-0.3-2.5,0.9-4.6c0.7-1.3,1.5-2.1,1.8-2.3c-0.4-0.8-2.7-6.5,0.3-12.7c2-4.2,7.3-6.5,11.2-4.8c4,1.6,5.3,4.6,5.1,6.7\n\t\tc-0.1,1.7-0.7,3.1-1.6,3.7c-0.4,0.3-0.9,0.4-1.3,0.2c-0.5-0.2-0.5-0.7-0.6-1.4c-0.1-1.2-0.1-2.8-2.3-4c-1.1-0.6-2.4-0.7-3.5-0.2\n\t\tc-0.8,0.3-2,1.1-2.6,2.9c-0.8,2.4-0.7,4.7,0.3,6.6c1.3,2.4,3.9,4.1,7.4,4.9c5.2,1.2,10.6-2.6,12.3-8.6c0.5-1.8,0.8-3.9,0.1-6.2\n\t\tc-1.4-4.4-4.5-8.5-12-12.1c-2.6-1.2-7.9-3.5-10-4.4c1.1-3.2,1.3-4.3,1.7-5.4c0.7-1.1,2.6-2.9,4.5-3.3c2.2-0.5,4.7,0.6,4.6,1\n\t\tc-0.1,0.4-2.9,1.1-4.5,4.7c0.6,0.3,5.9,1.7,10.5,4.6c7.7,4.9,9.8,10,10.4,12.3C234.9,203.7,234.7,207.2,233.8,210 M159.5,90.8\n\t\tc-4.6-4.2-8.4-5.3-8.4-5.3v-7.9c2.2,1.1,7.3,3.7,10.2,6.1c2.9,2.3,5.1,4.7,6.9,6.6l-1.2,8C164.9,96.1,162.2,93.2,159.5,90.8\n\t\t M153.7,105.2c-1.3-9-0.8-13.3-0.8-13.3c2.1,0.7,5.6,4.1,6.8,5.4c0,0-0.3,1.2,0.6,6.8c0.7,4.2,1.9,8.1,2.4,9.7l-6.5,3\n\t\tC155.6,114.6,154.4,110.1,153.7,105.2 M158.6,159.6c0.8,6,5.8,11.7,13.1,10.9c3.1-0.3,5.3-1.7,6.8-3.3l-0.5-0.4l0.1-0.1\n\t\tc-1-0.9-4.3-4-7.1-7.4c-2.7-3.4-4-5.2-4.3-5.5l-0.8-1.1c0.1-0.1,1-0.7,3.6-0.6c2.9,0.1,5.8,2.4,6.6,3l0,0c0,0,1.4,1.5,5.8,6\n\t\tc5.2,5.4,9,7.9,9.6,8.3c0,1.5-0.4,4.6-1,6.7l0,0c-2.4-1.3-5.6-3.9-7.1-5.1c-0.2-0.2-0.4-0.3-0.5-0.4c-1.9,2.3-4.8,4.6-9,5.7\n\t\tc-1,0.2-2,0.4-3.1,0.3c-9.4-0.3-15.7-7.1-17.2-13.8c-0.6-2.5-0.4-5.7-0.3-7.9c0.1-1.9,0.2-3.6-0.2-4.8c-0.5-1.4-1.2-2.3-1.6-2.9\n\t\tc-0.4-0.6-0.7-1-0.4-1.3c0.5-0.6,2.1-0.2,3.6,0.8c1,0.6,1.4,1.4,1.5,1.8c0.9-1.3,5.3-7.1,12.8-7.4c2.5-0.1,4.8,0.5,6.6,1.6\n\t\tc1.4,0.9,2.4,2.2,2.8,3.4c0.3,1,0.3,1.8-0.4,2.2c-0.4,0.2-1.2-0.2-2.3-0.7c-1.6-0.8-4.1-1.6-7-1.2c-2.3,0.3-5.7,1.9-7.9,4.8\n\t\tC159,153.4,158.2,156.4,158.6,159.6 M103.3,225c-9.3,1.6-26.9-0.9-26.9-0.9l-9.1-28.8c0,0,9.4,8.7,14.4,12.6\n\t\tc5,3.8,9.6,5.9,16.6,5.9c7,0,11.8-1.7,17-7.2c5.1-5.4,7.1-12.4,8.4-20.6c0.9-5.9,0.5-22.4,0.5-26.2l1.3-89.3c0,0,0.6-19.3-0.8-24.1\n\t\tc-1.4-4.9-4.4-8.4-6.2-10.2c-4-4-12.3-5.4-12.3-5.4c-2.4-0.4-2.9-1.6-2.8-2.7c0.3-1.7,1.8-2,1.8-2l59.5,0.1c0,0,1.5,0.2,1.7,1.9\n\t\tc0.2,1.2-0.3,2.3-2.8,2.7c0,0-8.4,1.3-12.3,5.4c-1.8,1.8-4.8,5.4-6.2,10.2c-1.4,4.9-0.8,24.1-0.8,24.1V160c0,0,0.2,17.3-2.1,26.4\n\t\tc-1.6,6.4-5.3,18.8-15,27.4C118.5,221.6,111.7,223.6,103.3,225 M60.7,209.2c-3.2,6.7-8.7,12.6-9.6,11.7c-0.8-0.8,0.2-1.5,0.8-3.5\n\t\tc0.5-2,0.7-2.5,0.7-2.5s-1.5,2-6.6,5.2c-5.2,3.2-6.1,3.4-7,2.1c-0.5-0.8,0.8-1.7,2-3.8c1.2-2.1,0.8-1.9,0.8-1.9s-4.4-0.4-8-2\n\t\tc-3.6-1.6-7.4-5.2-7.3-6c0.1-1,1.6-1.5,4.4-2.8c2.9-1.4,4.9-3.2,4.9-3.2s-1.9-0.5-3-0.9c-1.7-0.8-3.5-1.6-2.4-2.7\n\t\tc1-0.9,5.6,2.2,12.7-4.4c6.3-5.8,6.3-14.3,6.3-14.3s3.1,9.9-1,17.9c-5,9.7-14.3,9.8-13.2,11.8c1.3,2.5,12.6,0.2,17.5-11.4\n\t\tc4.1-9.8-0.2-22.2-3.3-29.5c-0.9-2.1-2.1-4.9-2.8-7.1c2.9,1.3,5.1,1.9,7.5,2.2l0,0c0,0,0,0,0,0c0.1,0,0.4,0.6,0.4,0.6\n\t\tc2.8,4.3,7,5.8,9.3,6.7c2.2,0.8,4.5,1.2,6.8,1.2c2,0,4.1-0.3,6-1c1.2-0.4,2.4-1.1,3.3-2c2.7-2.9,3.4-11.9,4.7-12.5\n\t\tc0.6-0.3,2,1.9,2.5,3.6c0.5,1.7,0.3,3.3,1.3,3.7c0.7,0.3,1.2-0.5,2.8-2.3c2.2-2.5,1.9-3.6,3-3.1c1.1,0.4-0.1,6-0.6,9\n\t\tc-0.5,3-2,7.4-2,7.4s3.7-2.3,7.1-3.9c9.6-4.2,13.3-2.9,13.4-1.8c0.1,1.1-2.2,1.3-4.7,4.2c-1.8,2.1-1.4,2.6-1.4,2.6s1.4,0,5.4-1.1\n\t\tc2.8-0.8,5.3-2.1,6.1-0.9c0.8,1.2-2.9,6.1-8.6,9.9c-5.7,3.9-10.4,5.3-10.4,5.3s1.1,1.1,3.9,1.6c2.8,0.5,4,0.1,4.2,0.9\n\t\tc0.3,1.1-2.8,2-8.2,2.6c-7.6,0.8-11.5-2.5-11.5-2.5s1,2.7-0.2,5.4c-1.2,2.8-1.4,5.3-2.5,5.2c-1.1-0.2,0.2-2.8-1.9-5.4\n\t\tc-2.3-2.8-4.9-3.4-8.8-6.3c-3.8-2.9-3.9-5.1-3.9-5.1s6.6,2.4,17.5,0.8c10.4-1.6,13.6-4.7,12.9-5.8c-0.7-1-2.4,0.3-7.3,1.4\n\t\tc-5.8,1.3-13.5,0.9-22.2-0.5c-3.1-0.5-7.2-1.9-10.9-4.3c1.5,2.8,3.9,8,4.4,11.6C64.8,195.4,64,202.4,60.7,209.2 M54,117.5\n\t\tc0.4-2.8,2-5.7,3-7c3.8-0.7,6.2,1.4,6.6,1.7c-2.1,3.9-3.4,8.2-4.5,12.6C57.7,124.2,55.7,122.3,54,117.5 M54.9,146.8\n\t\tc-2-0.2-6.9-3.5-7.2-4.3c0-1.7,0.4-5.5,1.1-7.7c2.5,4.2,6.6,6.1,6.6,6.1C54.7,143.6,54.9,146.8,54.9,146.8 M34.6,109.2\n\t\tc0.5-1.3,0.9-2.3,1.3-3.1c0.8-1.8,1.3-2.9,1.5-5.4c0.2-2.9-0.7-5.1-1.3-5.7c0.7,0.1,3.1,1.1,4,3c0.8,1.6,1.9,5.6,1.7,6.3\n\t\tc0,0.2,0,0.2,0.1,0.3c0.2,0.1,0.3,0,0.8-0.4c1.6-1.2,6.4-4.7,15-4.8h0.1c15.7,0,22.6,14.3,22.7,14.4l0,0.1l0.1,0\n\t\tc0.1,0,2.2,0.6,6.3-1.2c1.6-0.7,2.6-1.5,3.6-2.4c1.6-1.4,2.9-2.5,6.8-2.7c3.9-0.1,6.7,2,7.3,3.5c0.1,0.4,0.2,0.8-0.3,1.2\n\t\tc-0.6,0.4-0.7,0.4-1,0.2c-0.5-0.2-1.4-0.7-4.3-0.2c-2.4,0.4-3.5,2.5-4.7,4.8c-1.3,2.5-2.6,5.1-5.6,5.8c-2.8,0.7-6-1.1-6.6-2.1\n\t\tc-0.2-0.3-0.4-0.6-0.7-0.5c-0.3,0.1-0.4,0.5-0.4,0.6c0,0-0.1,2.4-1.6,6.5c-1.4,3.8-7.7,12.9-20.2,9.5c-7.6-2-10.6-9-10.3-13.4\n\t\tc0.1-1.4,0.6-2.4,1.2-2.4c0.6-0.1,1,0.3,1.2,0.7c0.6,1.6,1.2,3.2,2,4.6c1.2,1.9,3.5,4.2,6.3,4.8c6.2,1.3,10-1.8,10.7-2.4\n\t\tc2.4-2.1,3.7-5.7,3.5-9.6c-0.3-4.9-2.9-8.1-5.1-9.8c-2.8-2.3-6.4-3.6-9.9-3.6c-0.1,0-0.2,0-0.3,0c-4.5,0-9.2,1.8-12.8,5\n\t\tc-4.5,4-7.2,9.9-7.7,17.2c-0.5,6.2,2.1,13.1,6.8,18.1c3.6,3.8,8.1,6,12.6,6h0.2c11.8,0,19.5-7.2,27.6-14.8\n\t\tc7.6-7.1,15.4-14.4,27.7-17.8c0.9-0.2,5.1-0.6,6-0.7l-0.2,6.6c-6.9,1.3-16.5,5.6-16,10.3c0.5,4.6,3.5,7.1,5,8.3\n\t\tc0.3,0.3,0.7,0.5,0.7,0.6c0,0-0.2,0.2-0.6,0.3c-1.3,0.5-4.3,0.8-6.7-0.3c-3.2-1.4-6.3-6.5-6.3-6.6l-0.1-0.2l-0.2,0.2\n\t\tc-0.1,0.1-9.5,9.7-14.6,13.4c-3.3,2.4-12.1,8.7-22.4,8.2c-7.1-0.3-13.8-3.5-18.7-9c-5.1-5.8-7.9-13.7-7.8-22.4\n\t\tC30.9,120.3,31.8,116.7,34.6,109.2 M57.4,26.2c0.1,0,7.4-0.6,14.4,2.1c3.1,1.2,5.3,2.7,7.2,4.1l0,0c2.9,2,5.1,3.6,8.4,2.6\n\t\tc3.7-1.1,4.4-3.9,4.9-5.8c0.1-0.4,0.3-1.3,0.5-1.3c0.2-0.1,0.8,0.2,1.4,1.1c0.7,1,2.5,4.8-2.4,11.7c-2.7,3.8-7.1,4.6-7.2,4.6\n\t\tc-0.2,0-0.3,0.1-0.5,0.3c-0.1,0.2-0.1,0.4-0.1,0.5c0.3,1,0.3,1.7,0.4,2.4c0.2,2.4,0,4.7-1.7,8.5c-2.5,5.9-7.5,9.5-14,10.3\n\t\tc-6.4,0.7-11.5-2.8-13.4-6.6c-1.7-3.6-1.8-7.7-0.3-11.4c0.4-0.9,1-1.7,1.6-1.8c0.2-0.1,0.4,0,0.7,0.2c0.5,0.4,0.6,1.5,0.6,2.9\n\t\tc0.1,1.4,0.1,3.2,0.8,5c1,2.9,4.2,5.6,8.4,5.2c6.3-0.6,10.1-4.9,10.3-11.7c0.1-7.1-4.5-15.5-18-15.8c-0.2,0-0.3,0-0.5,0\n\t\tc-5.1,0-9.8,1.9-13.5,5.6c-4.4,4.3-7.1,10.8-7.2,17c-0.2,12.1,6.2,19.2,11.6,22.9c5.5,3.8,14,4.1,24.7,0.7\n\t\tc3.6-1.1,7.6-2.7,11.4-4.3l0,0c3.2-1.3,6.6-2.7,9.7-3.8c1.9-0.6,3.9-1.2,5.9-1.5l0.3-0.1l-0.2-0.2c-0.8-1.1-1.9-2.5-3.2-4.3\n\t\tc-2.8-3.8-3.5-10.7-2.6-12.2c0.4-0.6,0.8-0.7,1-0.7c0.2,0,0.3,0,0.3,0c0,0.1,0,0.4,0,0.5c0,0.3,0,1.9,0.8,2.8c1,1.1,2.3,1.3,2.9,1\n\t\tc0.2-0.1,0.3-0.3,0.4-0.4c0.2-0.6,1.1-3.6,2.8-6c1.4-2,5.8-5.1,8.3-5.1c0.1,0,0.1,0,0.2,0c0.7,0.1,1.1,0.3,1.4,0.9\n\t\tc0.3,0.7-0.7,1.8-1.1,2.2c-2.2,2.3-4.8,5.7-5,11.3c-0.1,2.6,0.7,4.8,2.3,6.5c3.1,3.2,8.3,3.6,9.3,3.6v5.8c-0.2,0-0.3,0-0.5,0\n\t\tc-5.2,0-9.3,6.1-10.7,12.5c-1.2,5.1-0.1,12.4,0.3,14.5c0.4,2,0,2.4-0.1,2.5c-0.1,0-0.2,0.1-0.3,0c-1.1-0.2-3.1-2.5-5.3-6\n\t\tc-1.7-2.6-1.2-5.8-0.9-7.6c0.1-1,0.2-1.4-0.2-1.7l-0.1-0.1c-0.2-0.2-0.6-0.4-0.9-0.4c0,0,0,0-0.1,0c-0.5,0-1,0.3-1.6,0.9\n\t\tc-0.5,0.5-0.7,0.9-0.9,1.2c-0.3,0.4-0.3,0.4-1,0.1c0,0-0.1,0-0.1-0.2c-0.5-1.3,1-5.7,2.8-8.9c1.5-2.5,3.1-4.3,5.3-6l0.6-0.5\n\t\tl-0.8,0.2c-7.5,1.7-15.1,4.6-19.7,7.7c-5.9,3.9-10.7,8.6-14.3,13.8c-0.7-0.4-1.2-0.7-2.8-1.4c-1-0.4-2.4-0.9-3.5-1\n\t\tc1.5-1.9,4-4.6,5-5.7l0.1-0.1c0.1-0.2,0.1-0.5-0.1-0.8c-0.2-0.2-0.5-0.3-0.8-0.2c-0.3,0.1-7,2.6-18.8-1.7C40.4,83.2,30.4,73,31,55\n\t\tC31.6,36.7,44.7,27.4,57.4,26.2 M16.2,240h234.2V10H16.2V240z"/>\n</g>\n</svg>\n',
note:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><path fill="currentColor" d="M14,0 C15.0543618,0 15.9181651,0.815877791 15.9945143,1.85073766 L16,2 L16,9 C16,9.27541264 15.8865388,9.53676152 15.6894833,9.7243131 L15.6,9.8 L7.6,15.8 C7.46152306,15.9038577 7.29908616,15.9695431 7.12886893,15.9916629 L7,16 L2,16 C0.945638205,16 0.0818348781,15.1841222 0.00548573643,14.1492623 L0,14 L0,2 C0,0.945638205 0.815877791,0.0818348781 1.85073766,0.00548573643 L2,0 L14,0 Z M14,2 L2,2 L2,14 L6,14 L6,9 C6,8.48716416 6.38604019,8.06449284 6.88337887,8.00672773 L7,8 L14,8 L14,2 Z M12,10 L8,10 L8,13 L12,10 Z"></path></svg>',pointer:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="8" viewBox="0 0 15 8" aria-hidden="true" focusable="false"><path d="M0 8 L7 0 L15 8" stroke="currentColor" strokeWidth="2" /></svg>\n',
show:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true" focusable="false"><path fill="currentColor" d="M8,2 C12.3599467,2 16,4.6000381 16,8 C16,11.3999619 12.3599467,14 8,14 C3.64005335,14 0,11.3999619 0,8 C0,4.6000381 3.64005335,2 8,2 Z M8,4 C4.62796016,4 2,5.8771144 2,8 C2,10.1228856 4.62796016,12 8,12 C11.3720398,12 14,10.1228856 14,8 C14,5.8771144 11.3720398,4 8,4 Z M8,6 C9.1045695,6 10,6.8954305 10,8 C10,9.1045695 9.1045695,10 8,10 C6.8954305,10 6,9.1045695 6,8 C6,6.8954305 6.8954305,6 8,6 Z"></path></svg>'};class kt{constructor(){this._listeners=new Map}add(t,e,n,o){t.addEventListener(e,n,o);const i=Symbol();return this._listeners.set(i,{eventTarget:t,eventType:e,listener:n}),i}remove(t){const e=this._listeners.get(t);if(e){const{eventTarget:n,eventType:o,listener:i}=e;n.removeEventListener(o,i),this._listeners.delete(t)}}removeAll(){this._listeners.forEach((({eventTarget:t,eventType:e,listener:n})=>{t.removeEventListener(e,n)})),
this._listeners.clear()}}function Rt(t){const e=t.toString(16);return 1===e.length?"0"+e:e}function Pt(t){const e=new Uint8Array(t/2);return window.crypto.getRandomValues(e),Array.from(e).map(Rt).join("")}function Lt(t){if(null===t||"object"!=typeof t)return!1;for(let e of["frame1","frame2","type","requestId"])if("string"!=typeof t[e])return!1;return!0}function Mt(t,e){return!!Lt(t)&&JSON.stringify(t,Object.keys(e).sort())===JSON.stringify(e,Object.keys(e).sort())}class Nt{constructor({hostFrame:t,source:e}){this._hostFrame=t,this._source=e,this._listeners=new kt}destroy(){this._listeners.removeAll()}async discover(t){let e=!1;if(("guest"===this._source&&"host"===t||"guest"===this._source&&"sidebar"===t||"sidebar"===this._source&&"host"===t||"notebook"===this._source&&"sidebar"===t)&&(e=!0),!e)throw new Error("Invalid request of channel/port");const n=Pt(6);return new Promise(((e,o)=>{const i=()=>{this._hostFrame.postMessage({frame1:this._source,frame2:t,type:"request",requestId:n},"*")
},r=setInterval(i,250),s=setTimeout((()=>{clearInterval(r),o(new Error(`Unable to establish ${this._source}-${t} communication channel`))}),2e4),a=this._listeners.add(window,"message",(o=>{const{data:i,ports:c}=o;Mt(i,{frame1:this._source,frame2:t,type:"offer",requestId:n})&&(clearInterval(r),clearTimeout(s),this._listeners.remove(a),e(c[0]))}));i()}))}}var Ot={exports:{}};function It(){}It.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function i(){o.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,s=o.length;r<s;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},Ot.exports=It;var Dt=Ot.exports.TinyEmitter=It;let Bt=null;function Ft(t){
return t instanceof Error?{message:t.message,stack:t.stack}:{message:String(t),stack:void 0}}function Vt(t,e){if(!Bt)return;const n={type:"hypothesis-error",error:t instanceof Error?t:Ft(t),context:e};try{try{Bt.postMessage(n,"*")}catch(t){if(!(t instanceof DOMException&&"DataCloneError"===t.name))throw t;n.error=Ft(n.error),Bt.postMessage(n,"*")}}catch(t){console.warn("Unable to report Hypothesis error",t)}}function Ht(t){Bt=t}class qt{constructor(t){this._hypothesisAppsOrigin=t,this._emitter=new Dt,this._handledRequests=new Set,this._sidebarHostChannel=new MessageChannel,this._listeners=new kt,this._allowedMessages=[{allowedOrigin:"*",frame1:"guest",frame2:"host",type:"request"},{allowedOrigin:"*",frame1:"guest",frame2:"sidebar",type:"request"},{allowedOrigin:this._hypothesisAppsOrigin,frame1:"sidebar",frame2:"host",type:"request"},{allowedOrigin:this._hypothesisAppsOrigin,frame1:"notebook",frame2:"sidebar",type:"request"}],this._listen()}_listen(){const t="Handling port request",e=new Set,n=n=>{
e.has(n)||(e.add(n),Vt(new Error(n),t))};var o,i;this._listeners.add(window,"message",(o=t=>{const{data:e,origin:o,source:i}=t;if(!Lt(e)||"request"!==e.type)return;const{frame1:r,frame2:s,requestId:a}=e,c=`${r}-${s}`;if(!function(t){return!(null===t||t instanceof MessagePort||window.ServiceWorker&&t instanceof ServiceWorker)}(i))return void n(`Ignored port request for channel ${c} from non-Window source`);if(void 0===this._allowedMessages.find((({allowedOrigin:t,...n})=>this._messageMatches({allowedMessage:n,allowedOrigin:t,data:e,origin:o}))))return void n(`Ignored invalid port request for channel ${c} from ${o}`);if(this._handledRequests.has(a))return;this._handledRequests.add(a);const l="sidebar-host"===c?this._sidebarHostChannel:new MessageChannel,h={frame1:r,frame2:s,type:"offer",requestId:a},u="null"===o?"*":o;i.postMessage(h,u,[l.port1]),"sidebar"===s?this._sidebarHostChannel.port2.postMessage(h,[l.port2]):"host"===s&&this._emitter.emit("frameConnected",r,l.port2)},i=t,(...t)=>{try{return o(...t)
}catch(t){throw Vt(t,i),t}}))}_messageMatches({allowedMessage:t,allowedOrigin:e,data:n,origin:o}){return("*"===e||o===e)&&Mt(n,t)}on(t,e){this._emitter.on(t,e)}destroy(){this._listeners.removeAll()}}function Ut(t,e,n=[],o=-1){t.postMessage({protocol:"frame-rpc",version:"1.0.0",arguments:n,method:e,sequence:o})}function Wt(t){const e=t.match(/\bAppleWebKit\/([0-9]+)\b/);if(!e)return!1;return!(parseInt(e[1])<=537)}class zt{constructor({userAgent:t=navigator.userAgent,currentWindow:e=window}={}){this._port=null,this._methods=new Map,this._sequence=1,this._callbacks=new Map,this._listeners=new kt,this._listeners.add(e,"unload",(()=>{this._port&&(Ut(this._port,"close"),e!==e.parent&&Wt(t)&&e.parent.postMessage({type:"hypothesisPortClosed"},"*",[this._port]))})),this._pendingCalls=[],this._receivedCloseEvent=!1}on(t,e){if(this._port)throw new Error("Cannot add a method handler after a port is connected");this._methods.set(t,e)}connect(t){this._port=t,this._listeners.add(t,"message",(t=>this._handle(t))),t.start(),
Ut(t,"connect");for(let[t,e]of this._pendingCalls)this.call(t,...e);this._pendingCalls=[]}destroy(){this._port&&(Ut(this._port,"close"),this._port.close()),this._destroyed=!0,this._listeners.removeAll()}call(t,...e){if(this._port||this._pendingCalls.push([t,e]),!this._port||this._destroyed)return;const n=this._sequence++,o=e[e.length-1];"function"==typeof o&&(this._callbacks.set(n,o),e=e.slice(0,-1)),Ut(this._port,t,e,n)}_parseMessage({data:t}){return t&&"object"==typeof t?"frame-rpc"!==t.protocol||"1.0.0"!==t.version?null:Array.isArray(t.arguments)?t:null:null}_handle(t){const e=this._parseMessage(t),n=this._port;if(e&&n)if("method"in e){if("close"===e.method){if(this._receivedCloseEvent)return;this._receivedCloseEvent=!0}const t=this._methods.get(e.method);if(!t)return;const o=(...t)=>{const o={arguments:t,protocol:"frame-rpc",response:e.sequence,version:"1.0.0"};n.postMessage(o)};t(...e.arguments,o)}else if("response"in e){const t=this._callbacks.get(e.response);this._callbacks.delete(e.response),
t&&t(...e.arguments)}}}function $t(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function jt(t){for(var e={},n=t.querySelectorAll("script.js-hypothesis-config"),o=0;o<n.length;o++){var i=void 0;try{i=JSON.parse(n[o].textContent||"")}catch(t){console.warn("Could not parse settings from js-hypothesis-config tags",t),i={}}$t(e,i)}return e}function Xt(t){if("string"==typeof t&&"false"===t.trim().toLocaleLowerCase())return!1;const e=Number(t);return isNaN(e)?"string"==typeof t:Boolean(e)}function Yt(t,e,n){const o=t.document.querySelector(`link[type="application/annotator+${n}"][rel="${e}"]`);if(!o)throw new Error(`No application/annotator+${n} (rel="${e}") link in the document`);if(!o.href)throw new Error(`application/annotator+${n} (rel="${e}") link has no href`);return o.href}function Gt(t){return"string"==typeof t?t:null}function Zt(t){const e=function(t){if(!t.hasOwnProperty("hypothesisConfig"))return{};if("function"!=typeof t.hypothesisConfig){
const t="https://h.readthedocs.io/projects/client/en/latest/publishers/config/#window.hypothesisConfig";return console.warn("hypothesisConfig must be a function, see: "+t),{}}return t.hypothesisConfig()}(t);let n;function o(t){return e.hasOwnProperty(t)?e[t]:n.hasOwnProperty(t)?n[t]:void 0}return n=Xt(e.ignoreOtherConfiguration)?{}:jt(t.document),{get annotations(){return Gt(n.annotations)||function(){const e=t.location.href.match(/#annotations:([A-Za-z0-9_-]+)$/);return e?e[1]:null}()},get clientUrl(){return Yt(t,"hypothesis-client","javascript")},get group(){return Gt(n.group)||function(){const e=t.location.href.match(/#annotations:group:([A-Za-z0-9_-]+)$/);return e?e[1]:null}()},get notebookAppUrl(){return Yt(t,"notebook","html")},get showHighlights(){return function(){const t=o("showHighlights");switch(t){case"always":case"never":case"whenSidebarOpen":return t;default:return"always";case!1:return"never"}}()},get sidebarAppUrl(){return Yt(t,"sidebar","html")},get query(){return Gt(n.query)||function(){
const e=t.location.href.match(/#annotations:(query|q):(.+)$/i);if(e)try{return decodeURIComponent(e[2])}catch(t){}return null}()},hostPageSetting:o}}function Kt(t,e){return t.hostPageSetting(e)}const Jt={annotations:{allowInBrowserExt:!0,defaultValue:null,getValue:t=>t.annotations},appType:{allowInBrowserExt:!0,defaultValue:null,getValue:Kt},branding:{defaultValue:null,allowInBrowserExt:!1,getValue:Kt},clientUrl:{allowInBrowserExt:!0,defaultValue:null,getValue:t=>t.clientUrl},contentPartner:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt},enableExperimentalNewNoteButton:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt},group:{allowInBrowserExt:!0,defaultValue:null,getValue:t=>t.group},focus:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt},theme:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt},usernameUrl:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt},onLayoutChange:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt},openSidebar:{allowInBrowserExt:!0,defaultValue:!1,coerce:Xt,getValue:Kt
},query:{allowInBrowserExt:!0,defaultValue:null,getValue:t=>t.query},requestConfigFromFrame:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt},services:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt},showHighlights:{allowInBrowserExt:!1,defaultValue:"always",getValue:t=>t.showHighlights},notebookAppUrl:{allowInBrowserExt:!0,defaultValue:null,getValue:t=>t.notebookAppUrl},sidebarAppUrl:{allowInBrowserExt:!0,defaultValue:null,getValue:t=>t.sidebarAppUrl},subFrameIdentifier:{allowInBrowserExt:!0,defaultValue:null,getValue:Kt},externalContainerSelector:{allowInBrowserExt:!1,defaultValue:null,getValue:Kt}};function Qt(t="annotator",e=window){const n=Zt(e),o={};let i=function(t){const e={annotator:["clientUrl","contentPartner","subFrameIdentifier"],sidebar:["appType","annotations","branding","enableExperimentalNewNoteButton","externalContainerSelector","focus","group","onLayoutChange","openSidebar","query","requestConfigFromFrame","services","showHighlights","sidebarAppUrl","theme","usernameUrl"],
notebook:["branding","group","notebookAppUrl","requestConfigFromFrame","services","theme","usernameUrl"]};switch(t){case"annotator":return e.annotator;case"sidebar":return e.sidebar;case"notebook":return e.notebook;case"all":return[...e.annotator,...e.sidebar,...e.notebook];default:throw new Error(`Invalid application context used: "${t}"`)}}(t);return i.forEach((t=>{const i=Jt[t],r=void 0!==i.defaultValue,s=!((a=Yt(e,"sidebar","html")).startsWith("http://")||a.startsWith("https://"));var a;if(!i.allowInBrowserExt&&s)return void(r&&(o[t]=i.defaultValue));const c=i.getValue(n,t);void 0!==c?o[t]=i.coerce?i.coerce(c):c:r&&(o[t]=i.defaultValue)})),o}const te={alt:1,ctrl:2,meta:4,shift:8};function ee(t,e,{rootElement:n=document.body}={}){const o=n=>{(function(t,e){const n=e.split("+").map((t=>t.toLowerCase()));let o=0,i=null;for(let t of n){const e=te[t];if(e)o|=e;else{if(null!==i)throw new Error("Multiple non-modifier keys specified");i=t}}if(!i)throw new Error(`Invalid shortcut: ${e}`)
;return((t.ctrlKey?te.ctrl:0)|(t.metaKey?te.meta:0)|(t.altKey?te.alt:0)|(t.shiftKey?te.shift:0))===o&&function(t){const e={Left:"ArrowLeft",Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Spacebar:" ",Del:"Delete"};return e[t]?e[t]:t}(t.key).toLowerCase()===i})(n,t)&&e(n)};return n.addEventListener("keydown",o),()=>n.removeEventListener("keydown",o)}function ne(t,e,{rootElement:n=document.body}={}){st((()=>{if(t)return ee(t,e,{rootElement:n})}),[t,e,n])}function oe({badgeCount:t}){return mt("span",{className:Z("rounded px-1 py-0.5","text-color-text-inverted font-bold bg-grey-7","dim-bg"),children:t})}function ie({arrowDirection:t}){return mt(Et,{name:"pointer",classes:Z("absolute left-1/2 -translate-x-1/2","h-auto w-auto z-2","text-grey-3 fill-white",{"rotate-180":"down"===t,"top-0 -translate-y-full":"up"===t})})}function re({badgeCount:t,icon:e,label:n,onClick:o,shortcut:i}){ne(i,o);const r=i?`${n} (${i})`:n;return mt(xt,{
className:Z("flex flex-col gap-y-1 items-center py-2.5 px-2","text-annotator-sm leading-none text-grey-7","transition-colors duration-200","dim-item"),onClick:o,title:r,children:[e&&mt(Et,{classes:"text-annotator-lg",name:e,title:r}),"number"==typeof t&&mt(oe,{badgeCount:t}),mt("span",{className:"font-normal",children:n})]})}function se({arrowDirection:t,isVisible:e,onCommand:n,annotationCount:o=0}){const i=e?"a":null,r=e?"h":null,s=e?"s":null;return ne(e?"Escape":null,(()=>n("hide"))),mt("div",{className:Z("AdderToolbar","absolute select-none bg-white rounded shadow-adderToolbar","border border-solid border-grey-3","opacity-5",{"animate-adderPopUp":"up"===t&&e,"animate-adderPopDown":"down"===t&&e}),dir:"ltr",style:{visibility:e?"visible":"hidden"},children:[mt("div",{className:"flex dim-items-on-hover",children:[mt(re,{icon:"annotate",onClick:()=>n("annotate"),label:"Annotate",shortcut:i}),mt(re,{icon:"highlight",onClick:()=>n("highlight"),label:"Highlight",shortcut:r}),o>0&&mt(f,{children:[mt("div",{
className:Z("m-1.5 border-r border-grey-4 border-solid")}),mt(re,{badgeCount:o,onClick:()=>n("show"),label:"Show",shortcut:s})]})]}),mt(ie,{arrowDirection:t})]})}const ae=(t=window)=>t.matchMedia("(pointer: coarse)").matches;function ce(t){const e=t.attachShadow({mode:"open"});!function(t){var e;const n=null===(e=document.querySelector('link[rel="preload"][href*="/build/styles/annotator.css"]'))||void 0===e?void 0:e.href;if(!n)return;const o=document.createElement("link");o.rel="stylesheet",o.href=n,t.appendChild(o)}(e);const n=window.applyFocusVisiblePolyfill;var o;return n&&n(e),(o=e).addEventListener("mouseup",(t=>t.stopPropagation())),o.addEventListener("mousedown",(t=>t.stopPropagation())),o.addEventListener("touchstart",(t=>t.stopPropagation()),{passive:!0}),e}function le(t){return t.toString()+"px"}class he{constructor(t,e){this._outerContainer=document.createElement("hypothesis-adder"),t.appendChild(this._outerContainer),this._shadowRoot=ce(this._outerContainer),
Object.assign(this._outerContainer.style,{position:"absolute",top:0,left:0}),this._view=t.ownerDocument.defaultView,this._width=()=>this._shadowRoot.firstChild.getBoundingClientRect().width,this._height=()=>this._shadowRoot.firstChild.getBoundingClientRect().height,this._isVisible=!1,this._arrowDirection="up",this._onAnnotate=e.onAnnotate,this._onHighlight=e.onHighlight,this._onShowAnnotations=e.onShowAnnotations,this.annotationsForSelection=[],this._render()}hide(){this._isVisible=!1,this._render(),Object.assign(this._outerContainer.style,{top:0,left:0})}destroy(){M(null,this._shadowRoot),this._outerContainer.remove()}show(t,e){const{left:n,top:o,arrowDirection:i}=this._calculateTarget(t,e);this._showAt(n,o),this._isVisible=!0,this._arrowDirection=2===i?"up":"down",this._render()}_calculateTarget(t,e){let n,o,i;n=e&&!ae()?1:2;const r=Math.min(20,t.width),s=this._width(),a=ae()?10:0,c=this._height();return i=e?t.left-s/2+r:t.left+t.width-s/2-r,t.top-c<0&&1===n?n=2:t.top+c>this._view.innerHeight&&(n=1),
o=2===n?t.top+t.height+10+a:t.top-c-10,i=Math.max(i,0),i=Math.min(i,this._view.innerWidth-s),o=Math.max(o,0),o=Math.min(o,this._view.innerHeight-c),{top:o,left:i,arrowDirection:n}}_findZindex(t,e){if(void 0===document.elementsFromPoint)return 32768;const n=this._width(),o=this._height(),i=[...new Set([...document.elementsFromPoint(t,e),...document.elementsFromPoint(t,e+o),...document.elementsFromPoint(t+n/2,e+o/2),...document.elementsFromPoint(t+n,e),...document.elementsFromPoint(t+n,e+o)])].map((t=>+getComputedStyle(t).zIndex)).filter(Number.isInteger);return i.push(0),Math.max(...i)+1}_showAt(t,e){const n=function(t){let e=t.parentElement;for(;e.parentElement&&"static"===getComputedStyle(e).position;)e=e.parentElement;return e}(this._outerContainer).getBoundingClientRect(),o=this._findZindex(t,e);Object.assign(this._outerContainer.style,{left:le(t-n.left),top:le(e-n.top),zIndex:o})}_render(){M(mt(se,{isVisible:this._isVisible,arrowDirection:this._arrowDirection,onCommand:t=>{switch(t){case"annotate":
this._onAnnotate(),this.hide();break;case"highlight":this._onHighlight(),this.hide();break;case"show":this._onShowAnnotations(this.annotationsForSelection);break;case"hide":this.hide()}},annotationCount:this.annotationsForSelection.length}),this._shadowRoot)}}function ue(t){switch(t.nodeType){case Node.ELEMENT_NODE:case Node.TEXT_NODE:return t.textContent.length;default:return 0}}function de(t){let e=t.previousSibling,n=0;for(;e;)n+=ue(e),e=e.previousSibling;return n}function fe(t,...e){let n=e.shift();const o=t.ownerDocument.createNodeIterator(t,NodeFilter.SHOW_TEXT),i=[];let r,s=o.nextNode(),a=0;for(;void 0!==n&&s;)r=s,a+r.data.length>n?(i.push({node:r,offset:n-a}),n=e.shift()):(s=o.nextNode(),a+=r.data.length);for(;void 0!==n&&r&&a===n;)i.push({node:r,offset:r.data.length}),n=e.shift();if(void 0!==n)throw new RangeError("Offset exceeds text length");return i}class pe{constructor(t,e){if(e<0)throw new Error("Offset is invalid");this.element=t,this.offset=e}relativeTo(t){
if(!t.contains(this.element))throw new Error("Parent is not an ancestor of current element");let e=this.element,n=this.offset;for(;e!==t;)n+=de(e),e=e.parentElement;return new pe(e,n)}resolve(t={}){try{return fe(this.element,this.offset)[0]}catch(e){if(0===this.offset&&void 0!==t.direction){const n=document.createTreeWalker(this.element.getRootNode(),NodeFilter.SHOW_TEXT);n.currentNode=this.element;const o=1===t.direction,i=o?n.nextNode():n.previousNode();if(!i)throw e;return{node:i,offset:o?0:i.data.length}}throw e}}static fromCharOffset(t,e){switch(t.nodeType){case Node.TEXT_NODE:return pe.fromPoint(t,e);case Node.ELEMENT_NODE:return new pe(t,e);default:throw new Error("Node is not an element or text node")}}static fromPoint(t,e){switch(t.nodeType){case Node.TEXT_NODE:{if(e<0||e>t.data.length)throw new Error("Text node offset is out of range");if(!t.parentElement)throw new Error("Text node has no parent");const n=de(t)+e;return new pe(t.parentElement,n)}case Node.ELEMENT_NODE:{
if(e<0||e>t.childNodes.length)throw new Error("Child node offset is out of range");let n=0;for(let o=0;o<e;o++)n+=ue(t.childNodes[o]);return new pe(t,n)}default:throw new Error("Point is not in an element or text node")}}}class ge{constructor(t,e){this.start=t,this.end=e}relativeTo(t){return new ge(this.start.relativeTo(t),this.end.relativeTo(t))}toRange(){let t,e;this.start.element===this.end.element&&this.start.offset<=this.end.offset?[t,e]=fe(this.start.element,this.start.offset,this.end.offset):(t=this.start.resolve({direction:1}),e=this.end.resolve({direction:2}));const n=new Range;return n.setStart(t.node,t.offset),n.setEnd(e.node,e.offset),n}static fromRange(t){const e=pe.fromPoint(t.startContainer,t.startOffset),n=pe.fromPoint(t.endContainer,t.endOffset);return new ge(e,n)}static fromOffsets(t,e,n){return new ge(new pe(t,e),new pe(t,n))}}function me(t){return!!t.parentElement&&null!==t.parentElement.closest(".annotator-placeholder")}function _e(t){
if(t.focusNode===t.anchorNode)return t.focusOffset<t.anchorOffset;return t.getRangeAt(0).startContainer===t.focusNode}function ve(t,e){try{var n,o;const i=null!==(n=null===(o=e.nodeValue)||void 0===o?void 0:o.length)&&void 0!==n?n:e.childNodes.length;return t.comparePoint(e,0)<=0&&t.comparePoint(e,i)>=0}catch(t){return!1}}function ye(t,e){const n=t.commonAncestorContainer,o=n.ownerDocument.createNodeIterator(n,NodeFilter.SHOW_ALL);let i;for(;i=o.nextNode();)ve(t,i)&&e(i)}function we(t){if(t.isCollapsed)return null;const e=function(t){const e=/^\s*$/,n=[];ye(t,(t=>{t.nodeType!==Node.TEXT_NODE||t.textContent.match(e)||n.push(t)}));let o=[];return n.forEach((e=>{const n=e.ownerDocument.createRange();if(n.selectNodeContents(e),e===t.startContainer&&n.setStart(e,t.startOffset),e===t.endContainer&&n.setEnd(e,t.endOffset),n.collapsed)return;const i=Array.from(n.getClientRects());n.detach(),o=o.concat(i)})),o}(t.getRangeAt(0));return 0===e.length?null:_e(t)?e[0]:e[e.length-1]}function be(t,e="hypothesis-highlight"){
const n=function(t){if(t.collapsed)return[];let e=t.commonAncestorContainer;if(e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentElement),!e)return[];const n=[],o=e.ownerDocument.createNodeIterator(e,NodeFilter.SHOW_TEXT);let i;for(;i=o.nextNode();){if(!ve(t,i))continue;let e=i;e===t.startContainer&&t.startOffset>0?e.splitText(t.startOffset):(e===t.endContainer&&t.endOffset<e.data.length&&e.splitText(t.endOffset),n.push(e))}return n}(t),o=n.length>0&&me(n[0]);let i=[],r=null,s=null;n.forEach((t=>{r&&r.nextSibling===t?s.push(t):(s=[t],i.push(s)),r=t}));const a=/^\s*$/;i=i.filter((t=>t.some((t=>!a.test(t.data)))));const c=[];return i.forEach((t=>{const n=document.createElement("hypothesis-highlight");n.className=e;t[0].parentNode.replaceChild(n,t[0]),t.forEach((t=>n.appendChild(t))),c.push(n)})),o||function(t){if(0===t.length)return;const e=function(t){const e=t.closest(".page");return e&&e.querySelector(".canvasWrapper > canvas")||null}(t[0]);if(!e||!e.parentElement)return
;let n=e.parentElement.querySelector(".hypothesis-highlight-layer");const o=CSS.supports("mix-blend-mode","multiply");if(!n){n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.setAttribute("class","hypothesis-highlight-layer"),e.parentElement.appendChild(n),e.parentElement.style.position="relative";const t=n.style;t.position="absolute",t.left="0",t.top="0",t.width="100%",t.height="100%",o?t.mixBlendMode="multiply":t.opacity="0.3"}const i=e.getBoundingClientRect(),r=t.map((t=>{const e=t.getBoundingClientRect(),n=document.createElementNS("http://www.w3.org/2000/svg","rect");return n.setAttribute("x",(e.left-i.left).toString()),n.setAttribute("y",(e.top-i.top).toString()),n.setAttribute("width",e.width.toString()),n.setAttribute("height",e.height.toString()),o?n.setAttribute("class","hypothesis-svg-highlight"):n.setAttribute("class","hypothesis-svg-highlight is-opaque"),t.classList.add("is-transparent"),t.svgHighlight=n,n}));n.append(...r)}(c),c}function Ce(t,e){const n=t.parentNode
;e.forEach((e=>n.insertBefore(e,t))),t.remove()}function xe(t){for(let e of t){if(e.parentNode){Ce(e,Array.from(e.childNodes))}e.svgHighlight&&e.svgHighlight.remove()}}function Se(t,e){t.forEach((t=>{if(t.svgHighlight){if(t.svgHighlight.classList.toggle("is-focused",e),e){t.svgHighlight.parentNode.append(t.svgHighlight)}}else t.classList.toggle("hypothesis-highlight-focused",e)}))}function Ee(t){const e=t.map((t=>t.getBoundingClientRect()));return e.reduce(((t,e)=>({top:Math.min(t.top,e.top),left:Math.min(t.left,e.left),bottom:Math.max(t.bottom,e.bottom),right:Math.max(t.right,e.right)})))}class Te{constructor({contentContainer:t,hostRPC:e}){this._hostRPC=e,this._updatePending=!1,this._anchors=[],this._listeners=new kt,this._listeners.add(window,"resize",(()=>this.update())),this._listeners.add(window,"scroll",(()=>this.update())),this._listeners.add(t,"scroll",(()=>this.update()))}destroy(){this._listeners.removeAll()}update(t){t&&(this._anchors=t),this._updatePending||(this._updatePending=!0,
requestAnimationFrame((()=>{const t=function(t){const e=[];return t.forEach((({annotation:t,highlights:n})=>{if(null==n||!n.length)return;const{top:o,bottom:i}=Ee(n);o>=i||e.push({tag:t.$tag,top:o,bottom:i})})),e.sort(((t,e)=>t.top-e.top)),e}(this._anchors);this._hostRPC.call("anchorsChanged",t),this._updatePending=!1})))}}function Ae(t){return t.split("").reverse().join("")}function ke(t){return(t|-t)>>31&1}function Re(t,e,n,o){let i=t.P[n],r=t.M[n];const s=o>>>31,a=e[n]|s,c=a|r,l=(a&i)+i^i|a;let h=r|~(l|i),u=i&l;const d=ke(h&t.lastRowMask[n])-ke(u&t.lastRowMask[n]);return h<<=1,u<<=1,u|=s,h|=ke(o)-s,i=u|~(c|h),r=h&c,t.P[n]=i,t.M[n]=r,d}function Pe(t,e,n){if(0===e.length)return[];n=Math.min(n,e.length);const o=[],i=32,r=Math.ceil(e.length/i)-1,s={P:new Uint32Array(r+1),M:new Uint32Array(r+1),lastRowMask:new Uint32Array(r+1)};s.lastRowMask.fill(1<<31),s.lastRowMask[r]=1<<(e.length-1)%i;const a=new Uint32Array(r+1),c=new Map,l=[];for(let t=0;t<256;t++)l.push(a);for(let t=0;t<e.length;t+=1){
const n=e.charCodeAt(t);if(c.has(n))continue;const o=new Uint32Array(r+1);c.set(n,o),n<l.length&&(l[n]=o);for(let t=0;t<=r;t+=1){o[t]=0;for(let r=0;r<i;r+=1){const s=t*i+r;if(s>=e.length)continue;e.charCodeAt(s)===n&&(o[t]|=1<<r)}}}let h=Math.max(0,Math.ceil(n/i)-1);const u=new Uint32Array(r+1);for(let t=0;t<=h;t+=1)u[t]=(t+1)*i;u[r]=e.length;for(let t=0;t<=h;t+=1)s.P[t]=-1,s.M[t]=0;for(let d=0;d<t.length;d+=1){const f=t.charCodeAt(d);let p;f<l.length?p=l[f]:(p=c.get(f),void 0===p&&(p=a));let g=0;for(let t=0;t<=h;t+=1)g=Re(s,p,t,g),u[t]+=g;if(u[h]-g<=n&&h<r&&(1&p[h+1]||g<0)){let t;if(h+=1,s.P[h]=-1,s.M[h]=0,h===r){const n=e.length%i;t=0===n?i:n}else t=i;u[h]=u[h-1]+t-g+Re(s,p,h,g)}else for(;h>0&&u[h]>=n+i;)h-=1;h===r&&u[h]<=n&&(u[h]<n&&o.splice(0,o.length),o.push({start:-1,end:d+1,errors:u[h]}),n=u[h])}return o}function Le(t,e,n){return function(t,e,n){const o=Ae(e);return n.map((n=>{const i=Math.max(0,n.end-e.length-n.errors);return{
start:Pe(Ae(t.slice(i,n.end)),o,n.errors).reduce(((t,e)=>n.end-e.end<t?n.end-e.end:t),n.end),end:n.end,errors:n.errors}}))}(t,e,Pe(t,e,n))}function Me(t,e,n){let o=0,i=[];for(;-1!==o;)o=t.indexOf(e,o),-1!==o&&(i.push({start:o,end:o+e.length,errors:0}),o+=1);return i.length>0?i:Le(t,e,n)}function Ne(t,e){if(0===e.length||0===t.length)return 0;return 1-Me(t,e,e.length)[0].errors/e.length}function Oe(t,e,n={}){if(0===e.length)return null;const o=Math.min(256,e.length/2),i=Me(t,e,o);if(0===i.length)return null;const r=o=>{const i=1-o.errors/e.length,r=n.prefix?Ne(t.slice(Math.max(0,o.start-n.prefix.length),o.start),n.prefix):1,s=n.suffix?Ne(t.slice(o.end,o.end+n.suffix.length),n.suffix):1;let a=1;if("number"==typeof n.hint){a=1-Math.abs(o.start-n.hint)/t.length}return(50*i+20*r+20*s+2*a)/92},s=i.map((t=>({start:t.start,end:t.end,score:r(t)})));return s.sort(((t,e)=>e.score-t.score)),s[0]}function Ie(t){const e=function(t){const e=t.nodeName.toLowerCase();let n=e;return"#text"===e&&(n="text()"),n
}(t),n=function(t){let e=0,n=t;for(;n;)n.nodeName===t.nodeName&&(e+=1),n=n.previousSibling;return e}(t);return`${e}[${n}]`}function De(t,e){let n="",o=t;for(;o!==e;){if(!o)throw new Error("Node is not a descendant of root");n=Ie(o)+"/"+n,o=o.parentNode}return n="/"+n,n=n.replace(/\/$/,""),n}function Be(t,e,n){e=e.toUpperCase();let o=-1;for(let i=0;i<t.children.length;i++){const r=t.children[i];if(r.nodeName.toUpperCase()===e&&(++o,o===n))return r}return null}function Fe(t,e=document.body){try{return function(t,e){if(null===t.match(/^(\/[A-Za-z0-9-]+(\[[0-9]+\])?)+$/))throw new Error("Expression is not a simple XPath");const n=t.split("/");let o=e;n.shift();for(let t of n){let e,n;const i=t.indexOf("[");if(-1!==i){e=t.slice(0,i);const o=t.slice(i+1,t.indexOf("]"));if(n=parseInt(o)-1,n<0)return null}else e=t,n=0;const r=Be(o,e,n);if(!r)return null;o=r}return o}(t,e)}catch(n){return document.evaluate("."+t,e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}}class Ve{constructor(t,e){this.root=t,
this.range=e}static fromRange(t,e){return new Ve(t,e)}static fromSelector(t,e){const n=Fe(e.startContainer,t);if(!n)throw new Error("Failed to resolve startContainer XPath");const o=Fe(e.endContainer,t);if(!o)throw new Error("Failed to resolve endContainer XPath");const i=pe.fromCharOffset(n,e.startOffset),r=pe.fromCharOffset(o,e.endOffset),s=new ge(i,r).toRange();return new Ve(t,s)}toRange(){return this.range}toSelector(){const t=ge.fromRange(this.range).toRange(),e=ge.fromRange(t),n=De(e.start.element,this.root),o=De(e.end.element,this.root);return{type:"RangeSelector",startContainer:n,startOffset:e.start.offset,endContainer:o,endOffset:e.end.offset}}}class He{constructor(t,e,n){this.root=t,this.start=e,this.end=n}static fromRange(t,e){const n=ge.fromRange(e).relativeTo(t);return new He(t,n.start.offset,n.end.offset)}static fromSelector(t,e){return new He(t,e.start,e.end)}toSelector(){return{type:"TextPositionSelector",start:this.start,end:this.end}}toRange(){
return ge.fromOffsets(this.root,this.start,this.end).toRange()}}class qe{constructor(t,e,n={}){this.root=t,this.exact=e,this.context=n}static fromRange(t,e){const n=t.textContent,o=ge.fromRange(e).relativeTo(t),i=o.start.offset,r=o.end.offset;return new qe(t,n.slice(i,r),{prefix:n.slice(Math.max(0,i-32),i),suffix:n.slice(r,Math.min(n.length,r+32))})}static fromSelector(t,e){const{prefix:n,suffix:o}=e;return new qe(t,e.exact,{prefix:n,suffix:o})}toSelector(){return{type:"TextQuoteSelector",exact:this.exact,prefix:this.context.prefix,suffix:this.context.suffix}}toRange(t={}){return this.toPositionAnchor(t).toRange()}toPositionAnchor(t={}){const e=Oe(this.root.textContent,this.exact,{...this.context,hint:t.hint});if(!e)throw new Error("Quote not found");return new He(this.root,e.start,e.end)}}async function Ue(t,e={}){return t.toRange(e)}function We(t,e,n={}){let o=null,i=null,r=null;for(let t of e)switch(t.type){case"TextPositionSelector":o=t,n.hint=o.start;break;case"TextQuoteSelector":i=t;break
;case"RangeSelector":r=t}const s=t=>{var e;if(null!==(e=i)&&void 0!==e&&e.exact&&t.toString()!==i.exact)throw new Error("quote mismatch");return t};let a=Promise.reject("unable to anchor");if(r){const e=r;a=a.catch((()=>Ue(Ve.fromSelector(t,e),n).then(s)))}if(o){const e=o;a=a.catch((()=>Ue(He.fromSelector(t,e),n).then(s)))}if(i){const e=i;a=a.catch((()=>Ue(qe.fromSelector(t,e),n)))}return a}function ze(t,e){const n=[Ve,He,qe],o=[];for(let i of n)try{const n=i.fromRange(t,e);o.push(n.toSelector())}catch(t){continue}return o}function $e(t,e=document.baseURI){return new URL(t,e).href.toString().replace(/#.*/,"")}class je{constructor(t={}){this.document=t.document||document}uri(){let t=decodeURIComponent(this._getDocumentHref());const e=this._getLinks();for(let n of e)"canonical"===n.rel&&(t=n.href);return t}getDocumentMetadata(){const t={title:document.title,link:[],dc:this._getMetaTags("name","dc."),eprints:this._getMetaTags("name","eprints."),facebook:this._getMetaTags("property","og:"),
highwire:this._getMetaTags("name","citation_"),prism:this._getMetaTags("name","prism."),twitter:this._getMetaTags("name","twitter:")},e=this._getFavicon();e&&(t.favicon=e),t.title=this._getTitle(t),t.link=this._getLinks(t);const n=t.link.find((t=>t.href.startsWith("urn:x-dc")));return n&&(t.documentFingerprint=n.href),t}_getMetaTags(t,e){const n={};for(let o of Array.from(this.document.querySelectorAll("meta"))){const i=o.getAttribute(t),{content:r}=o;if(i&&r){const t=i.match(RegExp(`^${e}(.+)$`,"i"));if(t){const e=t[1].toLowerCase();n[e]?n[e].push(r):n[e]=[r]}}}return n}_getTitle(t){return t.highwire.title?t.highwire.title[0]:t.eprints.title?t.eprints.title[0]:t.prism.title?t.prism.title[0]:t.facebook.title?t.facebook.title[0]:t.twitter.title?t.twitter.title[0]:t.dc.title?t.dc.title[0]:this.document.title}_getLinks(t={dc:{},highwire:{}}){const e=[{href:this._getDocumentHref()}],n=Array.from(this.document.querySelectorAll("link"))
;for(let t of n)if(["alternate","canonical","bookmark","shortlink"].includes(t.rel)){if("alternate"===t.rel){if(t.type&&t.type.match(/^application\/(rss|atom)\+xml/))continue;if(t.hreflang)continue}try{const n=this._absoluteUrl(t.href);e.push({href:n,rel:t.rel,type:t.type})}catch(t){}}for(let n of Object.keys(t.highwire)){const o=t.highwire[n];if("pdf_url"===n)for(let t of o)try{e.push({href:this._absoluteUrl(t),type:"application/pdf"})}catch(t){}if("doi"===n)for(let t of o)"doi:"!==t.slice(0,4)&&(t=`doi:${t}`),e.push({href:t})}for(let n of Object.keys(t.dc)){const o=t.dc[n];if("identifier"===n)for(let t of o)"doi:"===t.slice(0,4)&&e.push({href:t})}const o=t.dc["relation.ispartof"],i=t.dc.identifier;if(o&&i){const t=o[o.length-1],n=i[i.length-1],r="urn:x-dc:"+encodeURIComponent(t)+"/"+encodeURIComponent(n);e.push({href:r})}return e}_getFavicon(){let t=null;for(let e of Array.from(this.document.querySelectorAll("link")))if(["shortcut icon","icon"].includes(e.rel))try{t=this._absoluteUrl(e.href)}catch(t){}
return t}_absoluteUrl(t){return $e(t,this.document.baseURI)}_getDocumentHref(){const{href:t}=this.document.location,e=["http:","https:","file:"],n=new URL(t).protocol;return e.includes(n)?t:this.document.baseURI&&e.includes(new URL(this.document.baseURI).protocol)?this.document.baseURI:t}}function Xe(t){return t.width<=0||t.height<=0}function Ye(t,e,n,o){return Math.max(t,n)<Math.min(e,o)}function Ge(t,e){return!Xe(t)&&!Xe(e)&&(Ye(t.left,t.right,e.left,e.right)&&Ye(t.top,t.bottom,e.top,e.bottom))}function Ze(t,e){return Ye(t.top,t.bottom,e.top,e.bottom)}function Ke(t,e){return Ye(t.left,t.right,e.left,e.right)}function Je(t,e){if(Xe(t))return e;if(Xe(e))return t;const n=Math.min(t.left,e.left),o=Math.min(t.top,e.top),i=Math.max(t.right,e.right),r=Math.max(t.bottom,e.bottom);return new DOMRect(n,o,i-n,r-o)}function Qe(t){return new DOMPoint((t.left+t.right)/2,(t.top+t.bottom)/2)}const tn=["p",".para"];let en;function nn(t,e=0,n=t.data.length){return en||(en=document.createRange()),en.setStart(t,e),
en.setEnd(t,n),en.getBoundingClientRect()}function*on(t,e,n=(()=>!0)){let o=t.firstChild;for(;o;){if(o.nodeType===Node.ELEMENT_NODE){const t=o,i=t.getBoundingClientRect();n(t)&&Ge(i,e)&&(yield*on(t,e,n))}else if(o.nodeType===Node.TEXT_NODE){const t=o;Ge(nn(t),e)&&(yield t)}o=o.nextSibling}}function rn(t){let e=null;const n=function(t,e){const n=Math.max(t.left,e.left),o=Math.min(t.right,e.right),i=Math.max(t.top,e.top),r=Math.min(t.bottom,e.bottom);return new DOMRect(n,i,o-n,r-i)}(t.getBoundingClientRect(),new DOMRect(0,0,window.innerWidth,window.innerHeight));if(n.width<0||n.height<0)return null;const o=t=>!function(t){switch(getComputedStyle(t).position){case"fixed":case"sticky":return!0;default:return!1}}(t);t:for(let s of on(t,n,o)){let t=0;for(let o of s.data.split(/\b/)){if(/\S/.test(o)){const a=t,c=t+o.length,l=nn(s,a,c);if(r=l,!Xe(i=n)&&!Xe(r)&&r.left>=i.left&&r.right<=i.right&&r.top>=i.top&&r.bottom<=i.bottom){e=document.createRange(),e.setStart(s,a),e.setEnd(s,c);break t}}t+=o.length}}var i,r
;return e}function sn(t,e=document.documentElement){const n=rn(e);if(!n)return t(),0;const o=n.getBoundingClientRect().top;t();const i=n.getBoundingClientRect().top-o;return e.scrollTop+=i,i}function an(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function cn(t){var e=t._scrollSettings;if(e){var n=e.maxSynchronousAlignments,o=function(t,e){var n,o,i,r,s,a,c,l=t.align,h=t.target.getBoundingClientRect(),u=l&&null!=l.left?l.left:.5,d=l&&null!=l.top?l.top:.5,f=l&&null!=l.leftOffset?l.leftOffset:0,p=l&&null!=l.topOffset?l.topOffset:0,g=u,m=d;if(t.isWindow(e))a=Math.min(h.width,e.innerWidth),c=Math.min(h.height,e.innerHeight),o=h.left+e.pageXOffset-e.innerWidth*g+a*g,i=h.top+e.pageYOffset-e.innerHeight*m+c*m,o-=f,i-=p,o=t.align.lockX?e.pageXOffset:o,i=t.align.lockY?e.pageYOffset:i,r=o-e.pageXOffset,s=i-e.pageYOffset;else{a=h.width,c=h.height,n=e.getBoundingClientRect();var _=h.left-(n.left-e.scrollLeft),v=h.top-(n.top-e.scrollTop);o=_+a*g-e.clientWidth*g,i=v+c*m-e.clientHeight*m,o-=f,i-=p,
o=Math.max(Math.min(o,e.scrollWidth-e.clientWidth),0),i=Math.max(Math.min(i,e.scrollHeight-e.clientHeight),0),o=t.align.lockX?e.scrollLeft:o,i=t.align.lockY?e.scrollTop:i,r=o-e.scrollLeft,s=i-e.scrollTop}return{x:o,y:i,differenceX:r,differenceY:s}}(e,t),i=Date.now()-e.startTime,r=Math.min(1/e.time*i,1);if(e.endIterations>=n)return an(t,o.x,o.y),t._scrollSettings=null,e.end("complete");var s=1-e.ease(r);if(an(t,o.x-o.differenceX*s,o.y-o.differenceY*s),i>=e.time)return e.endIterations++,e.scrollAncestor&&cn(e.scrollAncestor),void cn(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(cn.bind(null,t))}}function ln(t){return t.self===t}function hn(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function un(){return!0}function dn(t){if(t.assignedSlot)return dn(t.assignedSlot)
;if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e.host}}var fn=function(t,e,n){if(t){"function"==typeof e&&(n=e,e=null),e||(e={}),e.time=isNaN(e.time)?1e3:e.time,e.ease=e.ease||function(t){return 1-Math.pow(1-t,t/2)},e.align=e.align||{};var o=dn(t),i=1,r=e.validTarget||un,s=e.isScrollable;e.debug&&(console.log("About to scroll to",t),o||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var a=[];o;)if(e.debug&&console.log("Scrolling parent node",o),r(o,i)&&(s?s(o,hn):hn(o))&&(i++,a.push(o)),!(o=dn(o))){c("complete");break}return a.reduce(((n,o,i)=>function(t,e,n,o,i){var r,s=!e._scrollSettings,a=e._scrollSettings,c=Date.now(),l={passive:!0};function h(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),
n.debug&&console.log("Scrolling ended with type",t,"for",e),i(t),r&&(e.removeEventListener("touchstart",r,l),e.removeEventListener("wheel",r,l))}a&&a.end("canceled");var u=n.maxSynchronousAlignments;return null==u&&(u=3),e._scrollSettings={startTime:c,endIterations:0,target:t,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||ln,maxSynchronousAlignments:u,end:h,scrollAncestor:o},"cancellable"in n&&!n.cancellable||(r=h.bind(null,"canceled"),e.addEventListener("touchstart",r,l),e.addEventListener("wheel",r,l)),s&&cn(e),r}(t,o,e,a[i+1],c)),null)}function c(t){--i||n&&n(t)}};function pn(t,e,n){return t+n*(e-t)}async function gn(t,e,{maxDuration:n=500}={}){const o=t.scrollTop,i=e,r=Date.now(),s=Math.min(Math.abs(i-o)/3,n);let a=0;for(;a<1;)await new Promise((t=>{requestAnimationFrame(t)})),a=Math.min(1,(Date.now()-r)/s),t.scrollTop=pn(o,i,a)}class mn{constructor(t=document.body){this.container=t,this.anchor=We,this.describe=ze,this._htmlMeta=new je,this.sideBySideEnabled=!1}canAnnotate(){return!0}
destroy(){}contentContainer(){return this.container}fitSideBySide(t){const e=window.innerWidth-t.width,n=t.expanded&&e>=480;return!!this.sideBySideEnabled&&(n?(this._activateSideBySide(t.width),!0):(this._deactivateSideBySide(),!1))}_activateSideBySide(t){const e=t+12,n=t=>parseInt(window.getComputedStyle(t).marginLeft,10);sn((()=>{document.body.style.marginLeft="",document.body.style.marginRight="";const t=n(document.body);document.body.style.marginRight=`${e}px`;const o=function(t){const e=new Map,n=new Map,o=tn.join(","),i=Array.from(t.querySelectorAll(o)).map((t=>({rect:t.getBoundingClientRect(),textLength:t.textContent.length}))).filter((({rect:t})=>t.width>0&&t.height>0)).sort(((t,e)=>e.textLength-t.textLength)).slice(0,15);if(i.forEach((({rect:t})=>{var o,i;let r=null!==(o=e.get(t.left))&&void 0!==o?o:0;r+=1,e.set(t.left,r);let s=null!==(i=n.get(t.right))&&void 0!==i?i:0;s+=1,n.set(t.right,s)})),0===e.size||0===n.size)return null
;const r=[...e.entries()].sort(((t,e)=>e[1]-t[1])),s=[...n.entries()].sort(((t,e)=>e[1]-t[1])),[a]=r[0],[c]=s[0];return{left:a,right:c}}(document.body);if(o){const i=Math.max(0,window.innerWidth-e-o.right);if(i>0){const t=Math.max(0,e-i);document.body.style.marginRight=`${t}px`}n(document.body)>t&&(document.body.style.marginLeft=`${t}px`),o.left<12&&(document.body.style.marginLeft="12px")}else document.body.style.marginLeft="",document.body.style.marginRight=""}))}_deactivateSideBySide(){sn((()=>{document.body.style.marginLeft="",document.body.style.marginRight=""}))}async getMetadata(){return this._htmlMeta.getDocumentMetadata()}async uri(){return this._htmlMeta.uri()}async scrollToAnchor(t){var e;const n=null===(e=t.highlights)||void 0===e?void 0:e[0];n&&await async function(t,{maxDuration:e=500}={}){const n=t.closest("body");n&&"BODY"!==n.tagName&&Object.defineProperty(n,"tagName",{value:"BODY",configurable:!0}),await new Promise((n=>fn(t,{time:e},n)))}(n)}}
var _n=/^\s+|\s+$/g,vn=/^[-+]0x[0-9a-f]+$/i,yn=/^0b[01]+$/i,wn=/^0o[0-7]+$/i,bn=parseInt,Cn="object"==typeof t&&t&&t.Object===Object&&t,xn="object"==typeof self&&self&&self.Object===Object&&self,Sn=Cn||xn||Function("return this")(),En=Object.prototype.toString,Tn=Math.max,An=Math.min,kn=function(){return Sn.Date.now()};function Rn(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Pn(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==En.call(t)}(t))return NaN;if(Rn(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Rn(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(_n,"");var n=yn.test(t);return n||wn.test(t)?bn(t.slice(2),n?2:8):vn.test(t)?NaN:+t}var Ln=function(t,e,n){var o,i,r,s,a,c,l=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=o,r=i;return o=i=void 0,l=e,s=t.apply(r,n)}function p(t){return l=t,a=setTimeout(m,e),h?f(t):s}
function g(t){var n=t-c;return void 0===c||n>=e||n<0||u&&t-l>=r}function m(){var t=kn();if(g(t))return _(t);a=setTimeout(m,function(t){var n=e-(t-c);return u?An(n,r-(t-l)):n}(t))}function _(t){return a=void 0,d&&o?f(t):(o=i=void 0,s)}function v(){var t=kn(),n=g(t);if(o=arguments,i=this,c=t,n){if(void 0===a)return p(c);if(u)return a=setTimeout(m,e),f(c)}return void 0===a&&(a=setTimeout(m,e)),s}return e=Pn(e)||0,Rn(n)&&(h=!!n.leading,r=(u="maxWait"in n)?Tn(Pn(n.maxWait)||0,e):r,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==a&&clearTimeout(a),l=0,o=c=i=a=void 0},v.flush=function(){return void 0===a?s:_(kn())},v};let Mn=new Set;function Nn(...t){const e=t.join();Mn.has(e)||(console.warn(...t),Mn.add(e))}Nn.reset=()=>{Mn.clear()};const On=0,In=3,Dn=new Map,Bn=new Map;function Fn(t,e){return`${t}:${e}`}function Vn(t){var e;const n="closest"in t?t:t.parentElement;return null!==(e=null==n?void 0:n.closest(".textLayer"))&&void 0!==e?e:null}function Hn(){return PDFViewerApplication.pdfViewer}
async function qn(t){const e=Hn();let n=e.getPageView(t);return n&&n.pdfPage||(n=await new Promise((n=>{const o=()=>{e.eventBus?e.eventBus.off("pagesloaded",o):document.removeEventListener("pagesloaded",o),n(e.getPageView(t))};e.eventBus?e.eventBus.on("pagesloaded",o):document.addEventListener("pagesloaded",o)}))),n}function Un(t){const e=Dn.get(t);if(e)return e;const n=(async()=>{const e=await qn(t);let n=(await e.pdfPage.getTextContent({normalizeWhitespace:!0})).items;return n.length>0&&!("hasEOL"in n[0])&&(n=n.filter((t=>/\S/.test(t.str)))),n.map((t=>t.str)).join("")})();return Dn.set(t,n),n}async function Wn(t){const e=Hn();let n=0,o=0,i="";for(let r=0;r<e.pagesCount;r++)if(i=await Un(r),n=o,o+=i.length,o>=t)return{index:r,offset:n,text:i};return{index:e.pagesCount-1,offset:n,text:i}}async function zn(t,e,n){const[o,i]=await Promise.all([qn(t),Un(t)]);if(o.renderingState===In&&o.textLayer&&o.textLayer.renderingDone){const t=o.textLayer.textLayerDiv
;i!==t.textContent&&Nn("PDF text layer content does not match page text. This will cause anchoring misalignment.");const r=new pe(t,e),s=new pe(t,n);return new ge(r,s).toRange()}const r=function(t){let e=t.querySelector(".annotator-placeholder");return e||(e=document.createElement("span"),e.classList.add("annotator-placeholder"),e.textContent="Loading annotations...",t.appendChild(e),e)}(o.div),s=document.createRange();return s.setStartBefore(r),s.setEndAfter(r),s}function $n(t){const e=[];let n="";for(let o=0;o<t.length;o++){const i=t[o];" "!==i&&"\t"!==i&&"\n"!==i&&(n+=i,e.push(o))}return[n,e]}async function jn(t,e){const n=e.find((t=>"TextQuoteSelector"===t.type));if(!n)throw new Error("No quote selector found");const o=e.find((t=>"TextPositionSelector"===t.type));if(o){try{const{index:t,offset:e,text:i}=await Wn(o.start),r=o.start-e,s=o.end-e,a=i.substring(r,s);if(n.exact!==a)throw new Error("quote mismatch");return await zn(t,r,s)}catch{}try{const t=Fn(n.exact,o.start),e=Bn.get(t);if(e){
const{pageIndex:t,anchor:n}=e;return await zn(t,n.start,n.end)}}catch{}}return async function(t,e){const n=Hn().pagesCount,o=Array(n).fill(0).map(((t,e)=>e));let i,r;if(e){const{index:t,offset:n}=await Wn(e);i=t,r=e-n,o.sort(((e,n)=>Math.abs(e-t)-Math.abs(n-t)))}const[s]=void 0!==t.prefix?$n(t.prefix):[],[a]=void 0!==t.suffix?$n(t.suffix):[],[c]=$n(t.exact);let l;for(let t of o){const e=await Un(t),[n,o]=$n(e);let h;if(void 0!==i&&void 0!==r){let n;for(n=t<i?e.length:t===i?r:0,h=0;h<o.length&&o[h]<n;)++h}const u=Oe(n,c,{prefix:s,suffix:a,hint:h});if(u&&(!l||u.score>l.match.score)){l={page:t,match:{start:o[u.start],end:o[u.end-1]+1,score:u.score}};const e=n.slice(u.start,u.end)===c,i=void 0!==s&&n.slice(Math.max(0,u.start-s.length),u.start)===s,r=void 0!==a&&n.slice(u.end,a.length)===a,h=void 0!==s||void 0!==a;if(e&&(i||r||!h))break}}if(l){const{page:n,match:o}=l;if(e){const i=Fn(t.exact,e);Bn.set(i,{pageIndex:n,anchor:o})}return zn(n,o.start,o.end)}throw new Error("Quote not found")}(n,null==o?void 0:o.start)
}function Xn(t){try{t=ge.fromRange(t).toRange()}catch{throw new Error("Selection does not contain text")}const e=Vn(t.startContainer),n=Vn(t.endContainer);if(!e||!n)throw new Error("Selection is outside page text");if(e!==n)throw new Error("Selecting across page breaks is not supported");return[t,e]}async function Yn(t,e){const[n,o]=Xn(e),i=pe.fromPoint(n.startContainer,n.startOffset).relativeTo(o),r=pe.fromPoint(n.endContainer,n.endOffset).relativeTo(o),s=function(t){let e=0;for(;t.previousSibling;)++e,t=t.previousSibling;return e}(o.parentNode),a=await async function(t){if(t>=Hn().pagesCount)throw new Error("Invalid page index");let e=0;for(let n=0;n<t;n++)e+=(await Un(n)).length;return e}(s);return[{type:"TextPositionSelector",start:a+i.offset,end:a+r.offset},qe.fromRange(t,n).toSelector()]}function Gn({children:t}){return mt("div",{className:"flex flex-col",children:t})}function Zn({provider:t,onClose:e}){return mt("div",{className:"flex items-center border-b gap-x-4 px-2 py-1 bg-white text-annotator-lg",
children:["jstor"===t&&mt(f,{children:[mt(Tt,{href:"https://jstor.org",target:"_blank",children:mt(Et,{classes:"w-[97px] h-[25px]",name:"jstor",title:"Document hosted by JSTOR"})}),mt("div",{className:"grow",children:["Document hosted by ",mt("b",{children:"JSTOR"})]})]}),mt("div",{className:"text-annotator-base",children:mt(xt,{onClick:e,"data-testid":"close-button",children:"Close"})})]})}function Kn(){return mt("div",{className:"bg-white",children:mt("div",{className:Z("flex items-center gap-x-2","border border-yellow-notice bg-yellow-notice/10 text-annotator-base"),children:[mt("div",{className:"bg-yellow-notice text-white p-2",children:mt(Et,{name:"caution",classes:"text-annotator-xl"})}),mt("div",{children:[mt("strong",{children:"This PDF does not contain selectable text:"})," ",mt(Tt,{target:"_blank",href:"https://web.hypothes.is/help/how-to-ocr-optimize-pdfs/",children:"Learn how to fix this"})," ","in order to annotate with Hypothesis."]})]})})}class Jn{constructor(t){this._loaded=function(t){
return t.initializedPromise?t.initializedPromise:t.initialized?Promise.resolve():new Promise((e=>{const n=setInterval((()=>{t.initialized&&(clearTimeout(n),e())}),5)}))}(t).then((()=>t.downloadComplete?t:new Promise((e=>{const n=()=>{t.eventBus?(t.eventBus.off("documentload",n),t.eventBus.off("documentloaded",n)):window.removeEventListener("documentload",n),e(t)};t.eventBus?(t.eventBus.on("documentloaded",n),t.eventBus.on("documentload",n)):window.addEventListener("documentload",n)}))))}getUri(){return this._loaded.then((t=>{let e=eo(t);return e||(e=to(Qn(t))),e}))}async getMetadata(){const t=await this._loaded,{info:e,contentDispositionFilename:n,metadata:o}=await t.pdfDocument.getMetadata(),i=Qn(t),r=eo(t);let s;s=null!=o&&o.has("dc:title")&&"Untitled"!==o.get("dc:title")?o.get("dc:title"):null!=e&&e.Title?e.Title:n||(r?function(t){const e=new URL(t).pathname.split("/");return e[e.length-1]}(r):"");const a=[{href:to(i)}];return r&&a.push({href:r}),{title:s,link:a,documentFingerprint:i}}}function Qn(t){
return Array.isArray(t.pdfDocument.fingerprints)?t.pdfDocument.fingerprints[0]:t.pdfDocument.fingerprint}function to(t){return`urn:x-pdf:${t}`}function eo(t){if(!t.url)return null;const e=$e(t.url);return 0!==e.indexOf("file://")?e:null}function no(t){var e;const n=null===(e=t.highlights)||void 0===e?void 0:e[0];return n&&me(n)}function oo(t){return new Promise((e=>setTimeout(e,t)))}class io{constructor(t,e={}){var n,o,i,r;this.annotator=t;const s=window,a=s.PDFViewerApplication;this.pdfViewer=a.pdfViewer,this.pdfViewer.viewer.classList.add("has-transparent-text-layer"),this.pdfContainer=null!==(n=null===(o=a.appConfig)||void 0===o?void 0:o.appContainer)&&void 0!==n?n:document.body,this.pdfMetadata=new Jn(a),this.observer=new MutationObserver(Ln((()=>this._update()),100)),this.observer.observe(this.pdfViewer.viewer,{attributes:!0,attributeFilter:["data-loaded"],childList:!0,subtree:!0}),this._reanchoringMaxWait=null!==(i=e.reanchoringMaxWait)&&void 0!==i?i:3e3,this._banner=null,this._bannerState={
contentPartner:null!==(r=e.contentPartner)&&void 0!==r?r:null,noTextWarning:!1},this._updateBannerState(this._bannerState),this._checkForSelectableText(),this._updateAnnotationLayerVisibility=()=>{const t=s.getSelection();this.pdfViewer.viewer.classList.toggle("is-selecting",!t.isCollapsed)},this._listeners=new kt,this._listeners.add(document,"selectionchange",this._updateAnnotationLayerVisibility),this._destroyed=!1}destroy(){var t;this._listeners.removeAll(),this.pdfViewer.viewer.classList.remove("has-transparent-text-layer"),this.observer.disconnect(),null===(t=this._banner)||void 0===t||t.remove(),this._destroyed=!0}uri(){return this.pdfMetadata.getUri()}getMetadata(){return this.pdfMetadata.getMetadata()}anchor(t,e){return jn(0,e)}canAnnotate(t){return function(t){try{return Xn(t),!0}catch{return!1}}(t)}describe(t,e){return Yn(t,e)}async _checkForSelectableText(){try{await this.uri()}catch(t){return}if(!this._destroyed)try{const t=await async function(){const t=Hn();let e=!1
;for(let n=0;n<t.pagesCount;n++)if((await Un(n)).trim().length>0){e=!0;break}return e}();this._updateBannerState({noTextWarning:!t})}catch(t){console.warn("Unable to check for text in PDF:",t)}}_updateBannerState(t){this._bannerState={...this._bannerState,...t};const e=document.querySelector("#outerContainer");var n;if(!(this._bannerState.contentPartner||this._bannerState.noTextWarning))return null===(n=this._banner)||void 0===n||n.remove(),this._banner=null,void(e.style.height="");this._banner||(this._banner=document.createElement("hypothesis-banner"),document.body.prepend(this._banner),ce(this._banner)),M(mt(Gn,{children:[this._bannerState.contentPartner&&mt(Zn,{provider:this._bannerState.contentPartner,onClose:()=>this._updateBannerState({contentPartner:null})}),this._bannerState.noTextWarning&&mt(Kn,{})]}),this._banner.shadowRoot);const o=this._banner.getBoundingClientRect().height;e.style.height=`calc(100% - ${o}px)`}_update(){const t=[],e=this.pdfViewer.pagesCount;for(let t=0;t<e;t++){var n
;const e=this.pdfViewer.getPageView(t);if(null!=e&&null!==(n=e.textLayer)&&void 0!==n&&n.renderingDone)switch(e.renderingState){case On:e.textLayer=null;break;case In:o=e.div,i=void 0,null===(i=o.querySelector(".annotator-placeholder"))||void 0===i||i.remove()}}var o,i;for(let e of this.annotator.anchors)if(e.highlights){if(t.includes(e.annotation))continue;for(let n=0;n<e.highlights.length;n++){const o=e.highlights[n];if(!document.body.contains(o)){e.highlights.splice(n,1),delete e.range,t.push(e.annotation);break}}}t.map((t=>this.annotator.anchor(t)))}contentContainer(){return document.querySelector("#viewerContainer")}fitSideBySide(t){const e=window.innerWidth-t.width,n=t.expanded&&e>=680,o=n?t.width:t.toolbarWidth;this.pdfContainer.style.width=`calc(100% - ${o}px)`;const i=this.pdfViewer.currentScaleValue;return"auto"!==i&&"page-fit"!==i&&"page-width"!==i||(this.pdfViewer.currentScaleValue=i),this.pdfViewer.update(),n}async scrollToAnchor(t){const e=t.annotation,n=no(t),o=this._anchorOffset(t)
;if(null!==o&&(await gn(this.contentContainer(),o),n)){const t=await this._waitForAnnotationToBeAnchored(e,this._reanchoringMaxWait);if(!t)return;const n=this._anchorOffset(t);if(null===n)return;await gn(this.contentContainer(),n)}}async _waitForAnnotationToBeAnchored(t,e){var n;const o=Date.now();let i;do{i=this.annotator.anchors.find((e=>e.annotation===t)),i&&!no(i)||(i=null,await oo(20))}while(!i&&Date.now()-o<e);return null!==(n=i)&&void 0!==n?n:null}_anchorOffset(t){if(!t.highlights)return null;return function(t,e){let n=0;for(;t!==e&&e.contains(t);)n+=t.offsetTop,t=t.offsetParent;return n}(t.highlights[0],this.contentContainer())}}class ro{constructor(t,e,n){this._element=t,this._onFrameAdded=e,this._onFrameRemoved=n,this._annotatableFrames=new Set,this._isDisconnected=!1,this._mutationObserver=new MutationObserver(Ln((()=>{this._discoverFrames()}),40)),this._discoverFrames(),this._mutationObserver.observe(this._element,{childList:!0,subtree:!0,attributeFilter:["enable-annotation"]})}disconnect(){
this._isDisconnected=!0,this._mutationObserver.disconnect()}async _addFrame(t){this._annotatableFrames.add(t);try{if(await so(t),this._isDisconnected)return;t.contentWindow.addEventListener("unload",(()=>{this._removeFrame(t)})),this._onFrameAdded(t)}catch(e){console.warn(`Unable to inject the Hypothesis client (from '${document.location.href}' into a cross-origin frame '${t.src}')`)}}_removeFrame(t){this._annotatableFrames.delete(t),this._onFrameRemoved(t)}_discoverFrames(){const t=new Set(this._element.querySelectorAll("iframe[enable-annotation]"));for(let e of t)this._annotatableFrames.has(e)||this._addFrame(e);for(let e of this._annotatableFrames)t.has(e)||this._removeFrame(e)}}function so(t){return new Promise(((e,n)=>{const o=ao(t,((t,i)=>{o(),i?e(i):n(t)}))}))}function ao(t,e,{pollInterval:n=10}={}){let o,i;const r=new WeakSet,s=()=>{clearTimeout(o),o=void 0},a=()=>{const n=t.contentDocument;if(n){if(!r.has(n)){if(r.add(n),s(),!function(t){var e
;return"about:blank"===(null===(e=t.contentDocument)||void 0===e?void 0:e.location.href)&&t.hasAttribute("src")&&"about:blank"!==t.src}(t)){"interactive"===n.readyState||"complete"===n.readyState?e(null,n):n.addEventListener("DOMContentLoaded",(()=>e(null,n)))}var o;t.contentDocument&&(null===(o=t.contentWindow)||void 0===o||o.addEventListener("unload",i))}}else e(new Error("Frame is cross-origin"))};let c=!1;i=()=>{s(),c||(o=setInterval(a,n))},t.addEventListener("load",a);const l=setTimeout(a,0);return()=>{c=!0,clearTimeout(l),s(),t.removeEventListener("load",a)}}class co{constructor(t,e,n){if(e.length!==n.length)throw new Error("Char boxes length does not match text length");const o=t.parentNode,i=document.createElement("hypothesis-text-layer");o.insertBefore(i,t.nextSibling),o.style.position="relative",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.color="transparent",i.style.textAlign="left",i.style.mixBlendMode="multiply";const r="sans-serif";i.style.fontSize="16px",
i.style.fontFamily=r;const s=document.createElement("canvas").getContext("2d");s.font="16px sans-serif";const a=(t,e,n="px")=>`calc(var(--${t}-scale) * ${e}${n})`,c=function(t,e){const n=[];let o={text:"",rect:new DOMRect};const i=()=>{o.text.length>0&&(n.push(o),o={text:"",rect:new DOMRect})};for(let[n,r]of t.entries()){const t=e[n],s=/\s/.test(t);o.rect=Je(o.rect,r),o.text+=s?" ":t,s&&i()}i();const r=[];let s={words:[],rect:new DOMRect};const a=()=>{s.words.length>0&&(r.push(s),s={words:[],rect:new DOMRect})};for(let t of n){const e=s.words[s.words.length-1];if(e){const n=Qe(e.rect),o=Qe(t.rect).x-n.x;(!Ze(e.rect,t.rect)||o<0)&&a()}s.words.push(t),s.rect=Je(s.rect,t.rect)}a();const c=[];let l={lines:[],rect:new DOMRect};const h=()=>{l.lines.length>0&&(c.push(l),l={lines:[],rect:new DOMRect})};for(let t of r){const e=l.lines[l.lines.length-1];if(e){const n=Qe(e.rect),o=Qe(t.rect).y-n.y;(!Ke(e.rect,t.rect)||Ze(e.rect,t.rect)||o<0||o>4*t.rect.height)&&h()}l.lines.push(t),l.rect=Je(l.rect,t.rect)}return h(),c
}(e,n);for(let t of c){const e=document.createElement("hypothesis-text-column");e.style.display="block",e.style.position="absolute",e.style.left=a("x",t.rect.left),e.style.top=a("y",t.rect.top);let n=null;for(let o of t.lines){const i=document.createElement("hypothesis-text-line");i.style.display="block",i.style.marginLeft=a("x",o.rect.left-t.rect.left),i.style.height=a("y",o.rect.height),n&&(i.style.marginTop=a("y",o.rect.top-n.rect.bottom)),n=o,i.style.whiteSpace="nowrap";let r=null;for(let t of o.words){const e=document.createElement("hypothesis-text-word");e.style.display="inline-block",e.style.transformOrigin="top left",e.textContent=t.text,r&&(e.style.marginLeft=a("x",t.rect.left-r.rect.right)),r=t,e.style.width=a("x",t.rect.width),e.style.height=a("y",t.rect.height),e.style.whiteSpace="pre";const n=s.measureText(t.text),o=a("x",t.rect.width/n.width,""),c=a("y",t.rect.height/16,"");e.style.transform=`scale(${o}, ${c})`,i.append(e)}e.append(i)}i.append(e)}const l=()=>{
const{width:e,height:n}=t.getBoundingClientRect();i.style.width=e+"px",i.style.height=n+"px",i.style.setProperty("--x-scale",`${e}`),i.style.setProperty("--y-scale",`${n}`)};l(),this.container=i,this._updateTextLayerSize=Ln(l,{maxWait:50}),this._listeners=new kt,"undefined"!=typeof ResizeObserver&&(this._imageSizeObserver=new ResizeObserver((()=>{this._updateTextLayerSize()})),this._imageSizeObserver.observe(t)),this._listeners.add(window,"resize",this._updateTextLayerSize)}updateSync(){this._updateTextLayerSize(),this._updateTextLayerSize.flush()}destroy(){var t;this.container.remove(),this._listeners.removeAll(),this._updateTextLayerSize.cancel(),null===(t=this._imageSizeObserver)||void 0===t||t.disconnect()}}class lo{constructor(t,e){this._config=e,this._frameObserver=new ro(t,(t=>ho(t,e)),(()=>{}))}destroy(){this._frameObserver.disconnect()}}async function ho(t,e){if(null!==t.contentDocument.querySelector("script.js-hypothesis-config"))return;await so(t)
;const{assetRoot:n,notebookAppUrl:o,sidebarAppUrl:i}=jt(document),r={...e,assetRoot:n,notebookAppUrl:o,sidebarAppUrl:i,subFrameIdentifier:Pt(10)},s=document.createElement("script");s.className="js-hypothesis-config",s.type="application/json",s.innerText=JSON.stringify(r);const a=document.createElement("script");a.async=!0,a.src=e.clientUrl;const c=t.contentDocument;c.body.appendChild(s),c.body.appendChild(a)}function uo(t=document){return t.querySelector("mosaic-book")}function fo(t=window){var e;if(uo(t.document))return"container";const n=null===(e=t.frameElement)||void 0===e?void 0:e.ownerDocument;return n&&uo(n)?"content":null}class po{constructor(t){const e=uo();if(!e)throw new Error("Book container element not found");const n=new WeakSet,o=e.shadowRoot,i=()=>{const e=o.querySelector("iframe");e&&!n.has(e)&&(n.add(e),ao(e,((n,o)=>{const i=null==o?void 0:o.body;i&&!i.querySelector("#page-content")&&ho(e,t)})))};i(),this._frameObserver=new MutationObserver(i),this._frameObserver.observe(o,{childList:!0,
subtree:!0})}destroy(){this._frameObserver.disconnect()}}function go(){return document.querySelector("img#pbk-page")}class mo{constructor(t=document.body){this._htmlIntegration=new mn(t),this._htmlIntegration.sideBySideEnabled=!0,this._listeners=new kt;const e=["mouseup","mousedown","mouseout"];for(let t of e)this._listeners.add(document.documentElement,t,(t=>{t.stopPropagation()}));const n=window.frameElement;n&&function(t){if("no"!==t.getAttribute("scrolling"))return;const e=document.createElement("style");e.textContent="iframe { height: 100% !important; }",t.insertAdjacentElement("beforebegin",e);const n=()=>t.removeAttribute("scrolling");n(),new MutationObserver(n).observe(t,{attributes:!0})}(n);const o=go(),i=window.innerPageData;if(o&&i){const t=i.glyphs.glyphs.map((t=>{const e=t.l/100,n=t.r/100,o=t.t/100,i=t.b/100;return new DOMRect(e,o,n-e,i-o)}));this._textLayer=new co(o,t,i.words),this._textLayer.container.style.zIndex="100"}}canAnnotate(){return!0}destroy(){var t
;null===(t=this._textLayer)||void 0===t||t.destroy(),this._listeners.removeAll(),this._htmlIntegration.destroy()}anchor(t,e){return this._htmlIntegration.anchor(t,e)}describe(t,e){return this._htmlIntegration.describe(t,e)}contentContainer(){return this._htmlIntegration.contentContainer()}fitSideBySide(t){const e=go();if(e&&this._textLayer){const n=e.parentElement,o=this._textLayer,i=window.innerWidth-t.width;return sn((()=>{t.expanded&&i>480?(n.style.textAlign="left",e.style.width=`${i}px`):(n.style.textAlign="",e.style.width=""),o.updateSync()})),t.expanded}return this._htmlIntegration.fitSideBySide(t)}async getMetadata(){return{title:document.title,link:[]}}async uri(){const t=new URL(document.location.href);return t.search="",t.toString()}async scrollToAnchor(t){return this._htmlIntegration.scrollToAnchor(t)}}function _o(t,{contentPartner:e}={}){if("undefined"!=typeof PDFViewerApplication)return new io(t,{contentPartner:e});return"content"===fo()?new mo:new mn}function vo(t){const e=t.getSelection()
;if(!e||0===e.rangeCount)return null;const n=e.getRangeAt(0);return n.collapsed?null:n}class yo{constructor(t,e=document){let n=!1;this._pendingCallback=null;const o=(n=10)=>{this._pendingCallback=setTimeout((()=>{t(vo(e))}),n)},i=t=>{if("mousedown"===t.type&&(n=!0),"mouseup"===t.type&&(n=!1),n)return;this._cancelPendingCallback();const e="mouseup"===t.type?10:100;o(e)};this._document=e,this._listeners=new kt,this._listeners.add(e,"selectionchange",i),this._listeners.add(e.body,"mousedown",i),this._listeners.add(e.body,"mouseup",i),o(1)}disconnect(){this._listeners.removeAll(),this._cancelPendingCallback()}_cancelPendingCallback(){this._pendingCallback&&(clearTimeout(this._pendingCallback),this._pendingCallback=null)}}function wo(){const t=function(t,e){const n=new Set,o=new Set;return ye(t,(t=>{let i=t;for(;i&&!n.has(i);){n.add(i);const t=e(i);null!=t&&o.add(t),i=i.parentNode}})),[...o]}(window.getSelection().getRangeAt(0),(t=>{var e;return null===(e=t._annotation)||void 0===e?void 0:e.$tag}));return t}
function bo(t){const e=function(t){let e=t.nodeType===Node.ELEMENT_NODE?t:t.parentElement;const n=[];for(;e;)e.classList.contains("hypothesis-highlight")&&n.push(e),e=e.parentElement;return n}(t).map((t=>t._annotation)).filter((t=>void 0!==t)).map((t=>null==t?void 0:t.$tag));return e}function Co(t){if(!t.range)return null;try{return t.range.toRange()}catch{return null}}function xo(){var t;null===(t=document.getSelection())||void 0===t||t.removeAllRanges()}class So{constructor(t,e={},n=window){this.element=t,this._hostFrame=n,this._highlightsVisible=!1,this._isAdderVisible=!1,this._informHostOnNextSelectionClear=!0,this.selectedRanges=[],this._adder=new he(this.element,{onAnnotate:()=>this.createAnnotation(),onHighlight:()=>this.createAnnotation({highlight:!0}),onShowAnnotations:t=>this.selectAnnotations(t)}),this._selectionObserver=new yo((t=>{t?this._onSelection(t):this._onClearSelection()})),this.anchors=[],this._annotations=new Set,this._frameIdentifier=e.subFrameIdentifier||null,this._portFinder=new Nt({
hostFrame:this._hostFrame,source:"guest"}),this._integration=_o(this,{contentPartner:e.contentPartner}),this._hostRPC=new zt,this._connectHost(n),this._sidebarRPC=new zt,this._connectSidebar(),this._bucketBarClient=new Te({contentContainer:this._integration.contentContainer(),hostRPC:this._hostRPC}),this._sideBySideActive=!1,this._listeners=new kt,this._setupElementEvents(),this._focusedAnnotations=new Set}_setupElementEvents(){const t=t=>{this._sideBySideActive||bo(t).length||this._sidebarRPC.call("closeSidebar")};this._listeners.add(this.element,"mouseup",(t=>{const{target:e,metaKey:n,ctrlKey:o}=t,i=bo(e);if(i.length&&this._highlightsVisible){const t=n||o;this.selectAnnotations(i,t)}})),this._listeners.add(this.element,"mousedown",(({target:e})=>{t(e)})),this._listeners.add(this.element,"touchstart",(({target:e})=>{t(e)})),this._listeners.add(this.element,"mouseover",(({target:t})=>{const e=bo(t);e.length&&this._highlightsVisible&&this._sidebarRPC.call("focusAnnotations",e)})),
this._listeners.add(this.element,"mouseout",(()=>{this._highlightsVisible&&this._sidebarRPC.call("focusAnnotations",[])})),this._listeners.add(window,"resize",(()=>this._repositionAdder()))}async getDocumentInfo(){const[t,e]=await Promise.all([this._integration.uri(),this._integration.getMetadata()]);return{uri:$e(t),metadata:e,frameIdentifier:this._frameIdentifier}}_repositionAdder(){var t;if(!1===this._isAdderVisible)return;const e=null===(t=window.getSelection())||void 0===t?void 0:t.getRangeAt(0);e&&this._onSelection(e)}async _connectHost(t){this._hostRPC.on("clearSelection",(()=>{vo(document)&&(this._informHostOnNextSelectionClear=!1,xo())})),this._hostRPC.on("createAnnotation",(()=>this.createAnnotation())),this._hostRPC.on("focusAnnotations",(t=>this._focusAnnotations(t))),this._hostRPC.on("scrollToClosestOffScreenAnchor",((t,e)=>this._scrollToClosestOffScreenAnchor(t,e))),this._hostRPC.on("selectAnnotations",((t,e)=>this.selectAnnotations(t,e))),this._hostRPC.on("sidebarLayoutChanged",(e=>{var n,o
;((n=window)===(o=t)||n.parent===o&&n.frameElement&&n.frameElement.getBoundingClientRect().width/n.parent.innerWidth>=.8)&&this.fitSideBySide(e)}));const e=await this._portFinder.discover("host");this._hostRPC.connect(e)}async _connectSidebar(){this._sidebarRPC.on("focusAnnotations",(t=>this._focusAnnotations(t))),this._sidebarRPC.on("scrollToAnnotation",(t=>{const e=this.anchors.find((e=>e.annotation.$tag===t));if(null==e||!e.highlights)return;const n=Co(e);if(!n)return;const o=new CustomEvent("scrolltorange",{bubbles:!0,cancelable:!0,detail:n});this.element.dispatchEvent(o)&&this._integration.scrollToAnchor(e)})),this._sidebarRPC.on("setHighlightsVisible",(t=>{this.setHighlightsVisible(t)})),this._sidebarRPC.on("deleteAnnotation",(t=>this.detach(t))),this._sidebarRPC.on("loadAnnotations",(t=>t.forEach((t=>this.anchor(t))))),this._portFinder.discover("sidebar").then((t=>{this._sidebarRPC.connect(t)})),this.getDocumentInfo().then((t=>this._sidebarRPC.call("documentInfoChanged",t)))}destroy(){
this._portFinder.destroy(),this._hostRPC.destroy(),this._sidebarRPC.destroy(),this._listeners.removeAll(),this._selectionObserver.disconnect(),this._adder.destroy(),this._bucketBarClient.destroy(),function(t){xe(Array.from(t.querySelectorAll("hypothesis-highlight")))}(this.element),this._integration.destroy()}async anchor(t){const e=t=>{const e=Co(t);if(!e)return;const n=be(e);n.forEach((e=>{e._annotation=t.annotation})),t.highlights=n,this._focusedAnnotations.has(t.annotation.$tag)&&Se(n,!0)};this.detach(t.$tag,!1),this._annotations.add(t.$tag),t.target||(t.target=[]);const n=await Promise.all(t.target.map((async e=>{if(!e.selector||!e.selector.some((t=>"TextQuoteSelector"===t.type)))return{annotation:t,target:e};let n;try{const o=await this._integration.anchor(this.element,e.selector),i=ge.fromRange(o);n={annotation:t,target:e,range:i}}catch(o){n={annotation:t,target:e}}return n})));if(!this._annotations.has(t.$tag))return[];for(let t of n)e(t)
;return t.$orphan=n.length>0&&n.every((t=>t.target.selector&&!t.range)),this._updateAnchors(this.anchors.concat(n),!0),this._sidebarRPC.call("syncAnchoringStatus",t),n}detach(t,e=!0){this._annotations.delete(t);const n=[];for(let e of this.anchors)e.annotation.$tag!==t?n.push(e):e.highlights&&xe(e.highlights);this._updateAnchors(n,e)}_updateAnchors(t,e){this.anchors=t,e&&this._bucketBarClient.update(this.anchors)}async createAnnotation({highlight:t=!1}={}){const e=this.selectedRanges;this.selectedRanges=[];const n=await this.getDocumentInfo(),o=this.element,i=(await Promise.all(e.map((t=>this._integration.describe(o,t))))).map((t=>({source:n.uri,selector:t}))),r={uri:n.uri,document:n.metadata,target:i,$highlight:t,$tag:"a:"+Pt(8)};return this._sidebarRPC.call("createAnnotation",r),this.anchor(r),xo(),r}_focusAnnotations(t){this._focusedAnnotations.clear(),t.forEach((t=>this._focusedAnnotations.add(t)));for(let e of this.anchors)if(e.highlights){const n=t.includes(e.annotation.$tag);Se(e.highlights,n)}
this._sidebarRPC.call("focusAnnotations",t)}_scrollToClosestOffScreenAnchor(t,e){const n=function(t,e){let n=null,o=0;for(let r of t){var i;if(null===(i=r.highlights)||void 0===i||!i.length)continue;const t=Ee(r.highlights).top;"up"===e&&t>=137||"down"===e&&t<=window.innerHeight-22||(!n||"up"===e&&t>o||"down"===e&&t<o)&&(n=r,o=t)}return n}(this.anchors.filter((({annotation:e})=>t.includes(e.$tag))),e);n&&this._integration.scrollToAnchor(n)}_onSelection(t){if(!this._integration.canAnnotate(t))return void this._onClearSelection();const e=document.getSelection(),n=_e(e),o=we(e);o?(this.selectedRanges=[t],this._hostRPC.call("textSelected"),this._adder.annotationsForSelection=wo(),this._isAdderVisible=!0,this._adder.show(o,n)):this._onClearSelection()}_onClearSelection(){this._isAdderVisible=!1,this._adder.hide(),this.selectedRanges=[],this._informHostOnNextSelectionClear&&this._hostRPC.call("textUnselected"),this._informHostOnNextSelectionClear=!0}selectAnnotations(t,e=!1){
e?this._sidebarRPC.call("toggleAnnotationSelection",t):this._sidebarRPC.call("showAnnotations",t),this._sidebarRPC.call("openSidebar")}setHighlightsVisible(t){!function(t,e){t.classList.toggle("hypothesis-highlights-always-on",e)}(this.element,t),this._highlightsVisible=t}fitSideBySide(t){this._sideBySideActive=this._integration.fitSideBySide(t)}get sideBySideActive(){return this._sideBySideActive}get focusedAnnotationTags(){return this._focusedAnnotations}}function Eo(t,e){const n=new URL(t),o=new URLSearchParams;return o.append("config",JSON.stringify(e)),n.hash=o.toString(),n.toString()}function To(t,e){var n;const o={};for(let[t,n]of Object.entries(e))"notebookAppUrl"!==t&&"sidebarAppUrl"!==t&&null!=n&&(o[t]=n);o.origin=new URL(t).origin,o.version="1.1014.0";const i=new URL(window.location.href);if(i.hash="",o.hostURL=i.toString(),Array.isArray(o.services)&&(null===(n=o.services)||void 0===n?void 0:n.length)>0){const t=o.services[0];t.onLoginRequest&&(t.onLoginRequestProvided=!0),
t.onLogoutRequest&&(t.onLogoutRequestProvided=!0),t.onSignupRequest&&(t.onSignupRequestProvided=!0),t.onProfileRequest&&(t.onProfileRequestProvided=!0),t.onHelpRequest&&(t.onHelpRequestProvided=!0)}return o}function Ao({config:t,groupId:e}){return mt("iframe",{title:"Hypothesis annotation notebook",className:"h-full w-full border-0",allowFullScreen:!0,src:Eo(t.notebookAppUrl,{...To(t.notebookAppUrl,t),group:e})})}function ko({eventBus:t,config:e}){const[n,o]=rt(0),[i,r]=rt(!0),[s,a]=rt(null),c=ct(""),l=ct(null);st((()=>(c.current=document.body.style.overflow,()=>{document.body.style.overflow=c.current})),[]),st((()=>{document.body.style.overflow=i?c.current:"hidden"}),[i]),st((()=>{const e=t.createEmitter();return e.subscribe("openNotebook",(t=>{r(!1),o((t=>t+1)),a(t)})),l.current=e,()=>{e.destroy()}}),[t]);return null===s?null:mt("div",{className:Z("fixed z-max top-0 left-0 right-0 bottom-0 p-3 bg-black/50",{hidden:i}),"data-testid":"notebook-outer",children:mt("div",{className:"relative w-full h-full",
"data-testid":"notebook-inner",children:[mt("div",{className:"absolute right-0 text-xl m-3",children:mt(Ct,{icon:"cancel",title:"Close the Notebook",onClick:()=>{var t;r(!0),null===(t=l.current)||void 0===t||t.publish("closeNotebook")},variant:"dark"})}),mt(Ao,{config:e,groupId:s},n)]})})}class Ro{constructor(t,e,n={}){this._outerContainer=document.createElement("hypothesis-notebook"),t.appendChild(this._outerContainer),this.shadowRoot=ce(this._outerContainer),M(mt(ko,{eventBus:e,config:n}),this.shadowRoot)}destroy(){M(null,this.shadowRoot),this._outerContainer.remove()}}var Po={exports:{}};!function(t){!function(e,n,o,i){var r,s=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),c=Math.round,l=Math.abs,h=Date.now;function u(t,e,n){return setTimeout(v(t,n),e)}function d(t,e,n){return!!Array.isArray(t)&&(f(t,n[e],n),!0)}function f(t,e,n){var o;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(o=0;o<t.length;)e.call(n,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}
function p(t,n,o){var i="DEPRECATED METHOD: "+n+"\n"+o+" AT \n";return function(){var n=new Error("get-stack-trace"),o=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,i,o),t.apply(this,arguments)}}r="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==i&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e}:Object.assign;var g=p((function(t,e,n){for(var o=Object.keys(e),r=0;r<o.length;)(!n||n&&t[o[r]]===i)&&(t[o[r]]=e[o[r]]),r++;return t}),"extend","Use `assign`."),m=p((function(t,e){return g(t,e,!0)}),"merge","Use `assign`.");function _(t,e,n){var o,i=e.prototype;(o=t.prototype=Object.create(i)).constructor=t,o._super=i,n&&r(o,n)}function v(t,e){return function(){
return t.apply(e,arguments)}}function y(t,e){return"function"==typeof t?t.apply(e&&e[0]||i,e):t}function w(t,e){return t===i?e:t}function b(t,e,n){f(E(e),(function(e){t.addEventListener(e,n,!1)}))}function C(t,e,n){f(E(e),(function(e){t.removeEventListener(e,n,!1)}))}function x(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function E(t){return t.trim().split(/\s+/g)}function T(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var o=0;o<t.length;){if(n&&t[o][n]==e||!n&&t[o]===e)return o;o++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function k(t,e,n){for(var o=[],i=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];T(i,s)<0&&o.push(t[r]),i[r]=s,r++}return n&&(o=e?o.sort((function(t,n){return t[e]>n[e]})):o.sort()),o}function R(t,e){for(var n,o,r=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((o=(n=s[a])?n+r:e)in t)return o;a++}return i}var P=1;function L(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}
var M="ontouchstart"in e,N=R(e,"PointerEvent")!==i,O=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I="touch",D="mouse",B=24,F=["x","y"],V=["clientX","clientY"];function H(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&n.handler(e)},this.init()}function q(t,e,n){var o=n.pointers.length,r=n.changedPointers.length,s=1&e&&o-r==0,a=12&e&&o-r==0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,o=e.pointers,r=o.length;n.firstInput||(n.firstInput=U(e));r>1&&!n.firstMultiple?n.firstMultiple=U(e):1===r&&(n.firstMultiple=!1);var s=n.firstInput,a=n.firstMultiple,c=a?a.center:s.center,u=e.center=W(o);e.timeStamp=h(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=X(c,u),e.distance=j(c,u),function(t,e){var n=e.center,o=t.offsetDelta||{},i=t.prevDelta||{},r=t.prevInput||{};1!==e.eventType&&4!==r.eventType||(i=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},
o=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-o.x),e.deltaY=i.y+(n.y-o.y)}(n,e),e.offsetDirection=$(e.deltaX,e.deltaY);var d=z(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=l(d.x)>l(d.y)?d.x:d.y,e.scale=a?(f=a.pointers,p=o,j(p[0],p[1],V)/j(f[0],f[1],V)):1,e.rotation=a?function(t,e){return X(e[1],e[0],V)+X(t[1],t[0],V)}(a.pointers,o):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,o,r,s,a=t.lastInterval||e,c=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(c>25||a.velocity===i)){var h=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,d=z(c,h,u);o=d.x,r=d.y,n=l(d.x)>l(d.y)?d.x:d.y,s=$(h,u),t.lastInterval=e}else n=a.velocity,o=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=o,e.velocityY=r,e.direction=s}(n,e);var f,p;var g=t.element;x(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}
function U(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:c(t.pointers[n].clientX),clientY:c(t.pointers[n].clientY)},n++;return{timeStamp:h(),pointers:e,center:W(e),deltaX:t.deltaX,deltaY:t.deltaY}}function W(t){var e=t.length;if(1===e)return{x:c(t[0].clientX),y:c(t[0].clientY)};for(var n=0,o=0,i=0;i<e;)n+=t[i].clientX,o+=t[i].clientY,i++;return{x:c(n/e),y:c(o/e)}}function z(t,e,n){return{x:e/t||0,y:n/t||0}}function $(t,e){return t===e?1:l(t)>=l(e)?t<0?2:4:e<0?8:16}function j(t,e,n){n||(n=F);var o=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(o*o+i*i)}function X(t,e,n){n||(n=F);var o=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,o)/Math.PI}H.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),
this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(L(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4},G="mousedown",Z="mousemove mouseup";function K(){this.evEl=G,this.evWin=Z,this.pressed=!1,H.apply(this,arguments)}_(K,H,{handler:function(t){var e=Y[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:D,srcEvent:t}))}});var J={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:I,3:"pen",4:D,5:"kinect"},tt="pointerdown",et="pointermove pointerup pointercancel";function nt(){this.evEl=tt,this.evWin=et,H.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(tt="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),_(nt,H,{handler:function(t){
var e=this.store,n=!1,o=t.type.toLowerCase().replace("ms",""),i=J[o],r=Q[t.pointerType]||t.pointerType,s=r==I,a=T(e,t.pointerId,"pointerId");1&i&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&i&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},it="touchstart",rt="touchstart touchmove touchend touchcancel";function st(){this.evTarget=it,this.evWin=rt,this.started=!1,H.apply(this,arguments)}function at(t,e){var n=A(t.touches),o=A(t.changedTouches);return 12&e&&(n=k(n.concat(o),"identifier",!0)),[n,o]}_(st,H,{handler:function(t){var e=ot[t.type];if(1===e&&(this.started=!0),this.started){var n=at.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:t})}}});var ct={touchstart:1,touchmove:2,touchend:4,touchcancel:8},lt="touchstart touchmove touchend touchcancel"
;function ht(){this.evTarget=lt,this.targetIds={},H.apply(this,arguments)}function ut(t,e){var n=A(t.touches),o=this.targetIds;if(3&e&&1===n.length)return o[n[0].identifier]=!0,[n,n];var i,r,s=A(t.changedTouches),a=[],c=this.target;if(r=n.filter((function(t){return x(t.target,c)})),1===e)for(i=0;i<r.length;)o[r[i].identifier]=!0,i++;for(i=0;i<s.length;)o[s[i].identifier]&&a.push(s[i]),12&e&&delete o[s[i].identifier],i++;return a.length?[k(r.concat(a),"identifier",!0),a]:void 0}_(ht,H,{handler:function(t){var e=ct[t.type],n=ut.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:t})}});function dt(){H.apply(this,arguments);var t=v(this.handler,this);this.touch=new ht(this.manager,t),this.mouse=new K(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ft(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,pt.call(this,e)):12&t&&pt.call(this,e)}function pt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={
x:e.clientX,y:e.clientY};this.lastTouches.push(n);var o=this.lastTouches;setTimeout((function(){var t=o.indexOf(n);t>-1&&o.splice(t,1)}),2500)}}function gt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var i=this.lastTouches[o],r=Math.abs(e-i.x),s=Math.abs(n-i.y);if(r<=25&&s<=25)return!0}return!1}_(dt,H,{handler:function(t,e,n){var o=n.pointerType==I,i=n.pointerType==D;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(o)ft.call(this,e,n);else if(i&&gt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var mt=R(a.style,"touchAction"),_t=mt!==i,vt="compute",yt="auto",wt="manipulation",bt="none",Ct="pan-x",xt="pan-y",St=function(){if(!_t)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(o){t[o]=!n||e.CSS.supports("touch-action",o)})),t}();function Et(t,e){this.manager=t,this.set(e)}Et.prototype={set:function(t){
t==vt&&(t=this.compute()),_t&&this.manager.element.style&&St[t]&&(this.manager.element.style[mt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,(function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(S(t,bt))return bt;var e=S(t,Ct),n=S(t,xt);if(e&&n)return bt;if(e||n)return e?Ct:xt;if(S(t,wt))return wt;return yt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var o=this.actions,i=S(o,bt)&&!St.none,r=S(o,xt)&&!St["pan-y"],s=S(o,Ct)&&!St["pan-x"];if(i){var a=1===t.pointers.length,c=t.distance<2,l=t.deltaTime<250;if(a&&c&&l)return}if(!s||!r)return i||r&&6&n||s&&n&B?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Tt=32;function At(t){this.options=r({},this.defaults,t||{}),this.id=P++,this.manager=null,
this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function kt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Rt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Pt(t,e){var n=e.manager;return n?n.get(t):t}function Lt(){At.apply(this,arguments)}function Mt(){Lt.apply(this,arguments),this.pX=null,this.pY=null}function Nt(){Lt.apply(this,arguments)}function Ot(){At.apply(this,arguments),this._timer=null,this._input=null}function It(){Lt.apply(this,arguments)}function Dt(){Lt.apply(this,arguments)}function Bt(){At.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ft(t,e){return(e=e||{}).recognizers=w(e.recognizers,Ft.defaults.preset),new Vt(t,e)}At.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous
;return e[(t=Pt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)||(t=Pt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===T(e,t=Pt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=Pt(t,this);var e=T(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function o(n){e.manager.emit(n,t)}n<8&&o(e.options.event+kt(n)),o(e.options.event),t.additionalEvent&&o(t.additionalEvent),n>=8&&o(e.options.event+kt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Tt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}
return!0},recognize:function(t){var e=r({},t);if(!y(this.options.enable,[this,e]))return this.reset(),void(this.state=Tt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(Lt,At,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,o=6&e,i=this.attrTest(t);return o&&(8&n||!i)?16|e:o||i?4&n?8|e:2&e?4|e:2:Tt}}),_(Mt,Lt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(xt),t&B&&e.push(Ct),e},directionTest:function(t){var e=this.options,n=!0,o=t.distance,i=t.direction,r=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===r?1:r<0?2:4,n=r!=this.pX,o=Math.abs(t.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,o=Math.abs(t.deltaY))),t.direction=i,n&&o>e.threshold&&i&e.direction},attrTest:function(t){
return Lt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Rt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),_(Nt,Lt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),_(Ot,At,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[yt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,o=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!o||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=u((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Tt},
reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),_(It,Lt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),_(Dt,Lt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Mt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&B&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&l(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Rt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),
this.manager.emit(this.options.event,t)}}),_(Bt,At,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,o=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(o&&i&&n){if(4!=t.eventType)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||j(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=u((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Tt},failTimeout:function(){return this._timer=u((function(){this.state=Tt}),this.options.interval,this),Tt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,
this.manager.emit(this.options.event,this._input))}}),Ft.VERSION="2.0.7",Ft.defaults={domEvents:!1,touchAction:vt,enable:!0,inputTarget:null,inputClass:null,preset:[[It,{enable:!1}],[Nt,{enable:!1},["rotate"]],[Dt,{direction:6}],[Mt,{direction:6},["swipe"]],[Bt],[Bt,{event:"doubletap",taps:2},["tap"]],[Ot]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Vt(t,e){var n;this.options=r({},Ft.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?nt:O?ht:M?dt:K))(n,q),this.touchAction=new Et(this,this.options.touchAction),Ht(this,!0),f(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Ht(t,e){var n,o=t.element;o.style&&(f(t.options.cssProps,(function(i,r){n=R(o.style,r),
e?(t.oldCssProps[n]=o.style[n],o.style[n]=i):o.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Vt.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var o=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var r=0;r<o.length;)n=o[r],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),r++}},get:function(t){if(t instanceof At)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){
if(d(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=T(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return f(E(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==i){var n=this.handlers;return f(E(t),(function(t){e?n[t]&&n[t].splice(T(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var o=n.createEvent("Event");o.initEvent(t,!0,!0),o.gesture=e,e.target.dispatchEvent(o)}(t,e);var o=this.handlers[t]&&this.handlers[t].slice();if(o&&o.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<o.length;)o[i](e),i++}},destroy:function(){this.element&&Ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(Ft,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Tt,
DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:B,DIRECTION_ALL:30,Manager:Vt,Input:H,TouchAction:Et,TouchInput:ht,MouseInput:K,PointerEventInput:nt,TouchMouseInput:dt,SingleTouchInput:st,Recognizer:At,AttrRecognizer:Lt,Tap:Bt,Pan:Mt,Swipe:Dt,Pinch:Nt,Rotate:It,Press:Ot,on:b,off:C,each:f,merge:m,extend:g,assign:r,inherit:_,bindFn:v,prefixed:R}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Ft,t.exports?t.exports=Ft:e.Hammer=Ft}(window,document)}(Po);function Lo({children:t}){return mt("ul",{className:Z("absolute w-[23px] left-[-22px] h-full","bg-grey-2 sidebar-collapsed:bg-black/[.08]","pointer-events-none"),children:t})}function Mo({children:t,topPosition:e}){return mt("li",{className:Z("absolute right-0","pointer-events-auto"),style:{top:e},children:t})}function No({above:t,below:e,buckets:n,onFocusAnnotations:o,onScrollToClosestOffScreenAnchor:i,onSelectAnnotations:r}){const s=t.tags.size>0,a=e.tags.size>0
;return mt(Lo,{children:[s&&mt(Mo,{topPosition:t.position,children:mt(xt,{className:Z("BucketButton UpBucketButton","right-0 mt-[-11px]"),"data-testid":"up-navigation-button",onClick:()=>i([...t.tags],"up"),onBlur:()=>o([]),onFocus:()=>o([...t.tags]),onMouseEnter:()=>o([...t.tags]),onMouseOut:()=>o([]),title:`Go up to next annotations (${t.tags.size})`,children:t.tags.size})}),n.map(((t,e)=>mt(Mo,{topPosition:t.position,children:mt(xt,{className:Z("BucketButton LeftBucketButton","right-0 mt-[-8px]"),onClick:e=>r([...t.tags],e.metaKey||e.ctrlKey),onBlur:()=>o([]),onFocus:()=>o([...t.tags]),onMouseEnter:()=>o([...t.tags]),onMouseOut:()=>o([]),title:`Select nearby annotations (${t.tags.size})`,children:t.tags.size})},e))),a&&mt(Mo,{topPosition:e.position,children:mt(xt,{className:"BucketButton DownBucketButton right-0","data-testid":"down-navigation-button",onClick:()=>i([...e.tags],"down"),onBlur:()=>o([]),onFocus:()=>o([...e.tags]),onMouseEnter:()=>o([...e.tags]),onMouseOut:()=>o([]),
title:`Go up to next annotations (${e.tags.size})`,children:e.tags.size})})]})}class Oo{constructor(t,{onFocusAnnotations:e,onScrollToClosestOffScreenAnchor:n,onSelectAnnotations:o}){this._bucketsContainer=document.createElement("div"),t.appendChild(this._bucketsContainer),this._onFocusAnnotations=e,this._onScrollToClosestOffScreenAnchor=n,this._onSelectAnnotations=o,this.update([])}destroy(){M(null,this._bucketsContainer),this._bucketsContainer.remove()}update(t){const e=function(t){const e=new Set,n=new Set,o=[];let i=null;function r({bottom:t,tag:e,top:n}){return{bottom:t,position:n+(t-n)/2,tags:new Set([e]),top:n}}return t.forEach((t=>{if(t.top<137)return void e.add(t.tag);if(t.top>window.innerHeight-22)return void n.add(t.tag);if(!i)return void(i=r(t));const s=t.top>i.top&&t.bottom<i.bottom;if(t.top-i.bottom>60&&!s)o.push(i),i=r(t);else{const e=t.bottom>i.bottom?t.bottom:i.bottom,n=e-i.top;i.tags.add(t.tag),i.bottom=e,i.position=i.top+n/2}})),i&&o.push(i),{above:{tags:e,position:137},below:{tags:n,
position:window.innerHeight-22},buckets:o}}(t);M(mt(No,{above:e.above,below:e.below,buckets:e.buckets,onFocusAnnotations:t=>this._onFocusAnnotations(t),onScrollToClosestOffScreenAnchor:(t,e)=>this._onScrollToClosestOffScreenAnchor(t,e),onSelectAnnotations:(t,e)=>this._onSelectAnnotations(t,e)}),this._bucketsContainer)}}let Io={};const Do=t=>{Io=t||{}},Bo=function(t){t.on("featureFlagsUpdated",Do)};function Fo({...t}){const{icon:e,title:n,...o}=t;return mt(Ct,{className:Z("w-[30px] h-[30px]","rounded-px","flex items-center justify-center","border bg-white text-grey-6 hover:text-grey-9","shadow transition-colors"),icon:e,title:n,...o})}function Vo({closeSidebar:t,createAnnotation:e,isSidebarOpen:n,newAnnotationType:o,showHighlights:i,toggleHighlights:r,toggleSidebar:s,toggleSidebarRef:a,useMinimalControls:c=!1}){return mt("div",{className:Z("absolute left-[-33px] w-[33px] z-2","text-px-base leading-none"),children:[c&&n&&mt(Ct,{
className:Z("w-[27px] h-[27px] mt-[140px] ml-px-1.5","flex items-center justify-center bg-white border","text-grey-6 hover:text-grey-9 transition-colors","border-r-0","shadow-sidebar"),title:"Close annotation sidebar",icon:"cancel",onClick:t}),!c&&mt(f,{children:[mt(Ct,{className:Z("h-[40px] w-[33px] pl-px-1.5","bg-white text-grey-5 hover:text-grey-9","border-l border-b"),buttonRef:a,title:"Annotation sidebar",icon:n?"caret-right":"caret-left",expanded:n,pressed:n,onClick:s}),mt("div",{className:"space-y-px-1.5 mt-px-2",children:[mt(Fo,{title:"Show highlights",icon:i?"show":"hide",selected:i,onClick:r}),mt(Fo,{title:"note"===o?"New page note":"New annotation",icon:"note"===o?"note":"annotate",onClick:e})]})]})]})}class Ho{constructor(t,e){const{createAnnotation:n,setSidebarOpen:o,setHighlightsVisible:i}=e;this._container=t,this._useMinimalControls=!1,this._newAnnotationType="note",this._highlightsVisible=!1,this._sidebarOpen=!1,this._closeSidebar=()=>o(!1),this._toggleSidebar=()=>o(!this._sidebarOpen),
this._toggleHighlights=()=>i(!this._highlightsVisible),this._createAnnotation=()=>{n(),o(!0)},this._sidebarToggleButton={current:null},this.render()}getWidth(){return this._container.firstChild.getBoundingClientRect().width}set useMinimalControls(t){this._useMinimalControls=t,this.render()}get useMinimalControls(){return this._useMinimalControls}set sidebarOpen(t){this._sidebarOpen=t,this.render()}get sidebarOpen(){return this._sidebarOpen}set newAnnotationType(t){this._newAnnotationType=t,this.render()}get newAnnotationType(){return this._newAnnotationType}set highlightsVisible(t){this._highlightsVisible=t,this.render()}get highlightsVisible(){return this._highlightsVisible}get sidebarToggleButton(){return this._sidebarToggleButton.current}render(){M(mt(Vo,{closeSidebar:this._closeSidebar,createAnnotation:this._createAnnotation,newAnnotationType:this._newAnnotationType,isSidebarOpen:this._sidebarOpen,showHighlights:this._highlightsVisible,toggleHighlights:this._toggleHighlights,
toggleSidebar:this._toggleSidebar,toggleSidebarRef:this._sidebarToggleButton,useMinimalControls:this.useMinimalControls}),this._container)}}class qo{constructor(t,e,n={}){if(this._emitter=e.createEmitter(),this._guestWithSelection=null,this._guestRPC=[],this._sidebarRPC=new zt,this.iframe=function(t){const e=t.sidebarAppUrl,n=Eo(e,To(e,t)),o=document.createElement("iframe");return o.setAttribute("allowfullscreen",""),o.src=n,o.title="Hypothesis annotation viewer",o.className="sidebar-frame",o}(n),this._config=n,this.bucketBar=null,n.externalContainerSelector){var o;this.externalFrame=null!==(o=document.querySelector(n.externalContainerSelector))&&void 0!==o?o:t,this.externalFrame.appendChild(this.iframe)}else{this.iframeContainer=document.createElement("div"),this.iframeContainer.style.display="none",this.iframeContainer.className="sidebar-container","clean"===n.theme?this.iframeContainer.classList.add("theme-clean"):this.bucketBar=new Oo(this.iframeContainer,{
onFocusAnnotations:t=>this._guestRPC.forEach((e=>e.call("focusAnnotations",t))),onScrollToClosestOffScreenAnchor:(t,e)=>this._guestRPC.forEach((n=>n.call("scrollToClosestOffScreenAnchor",t,e))),onSelectAnnotations:(t,e)=>this._guestRPC.forEach((n=>n.call("selectAnnotations",t,e)))}),this.iframeContainer.appendChild(this.iframe),this.hypothesisSidebar=document.createElement("hypothesis-sidebar");ce(this.hypothesisSidebar).appendChild(this.iframeContainer),t.appendChild(this.hypothesisSidebar)}this.iframe.contentWindow&&Ht(this.iframe.contentWindow),this._listeners=new kt;const i=document.createElement("div");this.toolbar=new Ho(i,{createAnnotation:()=>{var t;if(0===this._guestRPC.length)return;(null!==(t=this._guestWithSelection)&&void 0!==t?t:this._guestRPC[0]).call("createAnnotation")},setSidebarOpen:t=>t?this.open():this.close(),setHighlightsVisible:t=>this.setHighlightsVisible(t)}),"clean"===n.theme?this.toolbar.useMinimalControls=!0:this.toolbar.useMinimalControls=!1,
this.iframeContainer?(this.iframeContainer.prepend(i),this.toolbarWidth=this.toolbar.getWidth()):this.toolbarWidth=0,this._listeners.add(window,"resize",(()=>this._onResize())),this._gestureState={initial:null,final:null},this._setupGestures(),this.close();const[r]=n.services||[];r&&(this.onLoginRequest=r.onLoginRequest,this.onLogoutRequest=r.onLogoutRequest,this.onSignupRequest=r.onSignupRequest,this.onProfileRequest=r.onProfileRequest,this.onHelpRequest=r.onHelpRequest),this.onLayoutChange=n.onLayoutChange,this._layoutState={expanded:!1,width:0,toolbarWidth:0},this._updateLayoutState(!1),this._setupSidebarEvents()}destroy(){var t,e;this._guestRPC.forEach((t=>t.destroy())),this._sidebarRPC.destroy(),null===(t=this.bucketBar)||void 0===t||t.destroy(),this._listeners.removeAll(),null===(e=this._hammerManager)||void 0===e||e.destroy(),this.hypothesisSidebar?this.hypothesisSidebar.remove():this.iframe.remove(),this._emitter.destroy(),Ht(null)}onFrameConnected(t,e){switch(t){case"guest":this._connectGuest(e)
;break;case"sidebar":this._sidebarRPC.connect(e)}}_connectGuest(t){const e=new zt;e.on("textSelected",(()=>{this._guestWithSelection=e,this.toolbar.newAnnotationType="annotation",this._guestRPC.filter((t=>t!==e)).forEach((t=>t.call("clearSelection")))})),e.on("textUnselected",(()=>{this._guestWithSelection=null,this.toolbar.newAnnotationType="note",this._guestRPC.filter((t=>t!==e)).forEach((t=>t.call("clearSelection")))}));const n=this.bucketBar;n&&e.on("anchorsChanged",(t=>{0===this._guestRPC.indexOf(e)&&n.update(t)})),e.on("close",(()=>{e.destroy(),e===this._guestWithSelection&&(this._guestWithSelection=null),this._guestRPC=this._guestRPC.filter((t=>t!==e))})),e.connect(t),this._guestRPC.push(e),e.call("sidebarLayoutChanged",this._layoutState)}_setupSidebarEvents(){var t;t=document.body,this._sidebarRPC.on("publicAnnotationCountChanged",(function(e){const n=t.querySelectorAll("[data-hypothesis-annotation-count]");Array.from(n).forEach((t=>{t.textContent=e.toString()}))})),function(t,e){
const n=t.querySelectorAll("[data-hypothesis-trigger]");Array.from(n).forEach((t=>{t.addEventListener("click",(t=>{e(),t.stopPropagation()}))}))}(document.body,(()=>this.open())),Bo(this._sidebarRPC),this._sidebarRPC.on("connect",(()=>{this.iframeContainer&&(this.iframeContainer.style.display="");const t="always"===this._config.showHighlights;this.setHighlightsVisible(t),(this._config.openSidebar||this._config.annotations||this._config.query||this._config.group)&&this.open()})),this._sidebarRPC.on("showHighlights",(()=>this.setHighlightsVisible(!0))),this._sidebarRPC.on("openSidebar",(()=>this.open())),this._sidebarRPC.on("closeSidebar",(()=>this.close())),this._sidebarRPC.on("openNotebook",(t=>{this.hide(),this._emitter.publish("openNotebook",t)})),this._emitter.subscribe("closeNotebook",(()=>{this.show()}))
;[["loginRequested",this.onLoginRequest],["logoutRequested",this.onLogoutRequest],["signupRequested",this.onSignupRequest],["profileRequested",this.onProfileRequest],["helpRequested",this.onHelpRequest]].forEach((([t,e])=>{e&&this._sidebarRPC.on(t,(()=>e()))}))}_resetGestureState(){this._gestureState={initial:null,final:null}}_setupGestures(){const t=this.toolbar.sidebarToggleButton;t&&(this._hammerManager=new Po.exports.Manager(t),this._hammerManager.on("panstart panend panleft panright",(t=>this._onPan(t))),this._hammerManager.add(new Po.exports.Pan({direction:Po.exports.DIRECTION_HORIZONTAL})))}_updateLayout(){this.renderFrame||(this.renderFrame=requestAnimationFrame((()=>{if(this.renderFrame=null,this._gestureState.final!==this._gestureState.initial&&this.iframeContainer){const t=this._gestureState.final,e=-t;this.iframeContainer.style.marginLeft=`${t}px`,e>=280&&(this.iframeContainer.style.width=`${e}px`),this._updateLayoutState()}})))}_updateLayoutState(t){var e
;const n=this.iframeContainer&&this.toolbar.getWidth()||0,o=null!==(e=this.iframeContainer)&&void 0!==e?e:this.externalFrame,i=o.getBoundingClientRect(),r=window.getComputedStyle(o),s=parseInt(r.width),a=parseInt(r.marginLeft);let c=n;"boolean"==typeof t?t&&(c+=s):(a<280?c-=a:c+=s,t=c>n);const l={expanded:t,width:t?c:n,height:i.height,toolbarWidth:n};this._layoutState=l,this.onLayoutChange&&this.onLayoutChange(l),this._guestRPC.forEach((t=>t.call("sidebarLayoutChanged",l)))}_onResize(){!0===this.toolbar.sidebarOpen&&(window.innerWidth<280?this.close():this.open())}_onPan(t){const e=this.iframeContainer;if(e)switch(t.type){case"panstart":this._resetGestureState(),e.classList.add("sidebar-no-transition"),e.style.pointerEvents="none",this._gestureState.initial=parseInt(getComputedStyle(e).marginLeft);break;case"panend":e.classList.remove("sidebar-no-transition"),e.style.pointerEvents="",null===this._gestureState.final||this._gestureState.final<=-280?this.open():this.close(),this._resetGestureState();break
;case"panleft":case"panright":{if("number"!=typeof this._gestureState.initial)return;const e=this._gestureState.initial,n=t.deltaX;this._gestureState.final=Math.min(Math.round(e+n),0),this._updateLayout();break}}}open(){if(this._sidebarRPC.call("sidebarOpened"),this.iframeContainer){const t=this.iframeContainer.getBoundingClientRect().width;this.iframeContainer.style.marginLeft=-1*t+"px",this.iframeContainer.classList.remove("sidebar-collapsed")}this.toolbar.sidebarOpen=!0,"whenSidebarOpen"===this._config.showHighlights&&this.setHighlightsVisible(!0),this._updateLayoutState(!0)}close(){this.iframeContainer&&(this.iframeContainer.style.marginLeft="",this.iframeContainer.classList.add("sidebar-collapsed")),this.toolbar.sidebarOpen=!1,"whenSidebarOpen"===this._config.showHighlights&&this.setHighlightsVisible(!1),this._updateLayoutState(!1)}setHighlightsVisible(t){this.toolbar.highlightsVisible=t,this._sidebarRPC.call("setHighlightsVisible",t)}show(){
this.iframeContainer&&this.iframeContainer.classList.remove("is-hidden")}hide(){this.iframeContainer&&this.iframeContainer.classList.add("is-hidden")}}class Uo{constructor(t){this._emitter=t,this._subscriptions=[]}publish(t,...e){this._emitter.emit(t,...e)}subscribe(t,e){this._emitter.on(t,e),this._subscriptions.push([t,e])}unsubscribe(t,e){this._emitter.off(t,e),this._subscriptions=this._subscriptions.filter((([n,o])=>n!==t||o!==e))}destroy(){for(let[t,e]of this._subscriptions)this._emitter.off(t,e);this._subscriptions=[]}}class Wo{constructor(){this._emitter=new Dt}createEmitter(){return new Uo(this._emitter)}}!function(t,{reset:e=!1}={}){e&&_t.clear();for(let[e,n]of Object.entries(t))_t.set(e,n)}(At);const zo=document.querySelector('link[type="application/annotator+html"][rel="sidebar"]');new Promise((t=>{"loading"!==document.readyState&&t(),document.addEventListener("readystatechange",(()=>t()))})).then((function(){const t=Qt("annotator"),e=t.subFrameIdentifier?window.parent:window,n=[];if(e===window){
const t=function(t=navigator.userAgent){if(!Wt(t))return()=>{};const e=t=>{var e;if("hypothesisPortClosed"===(null===(e=t.data)||void 0===e?void 0:e.type)&&t.ports[0]){const e=t.ports[0];Ut(e,"close"),e.close()}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}();n.push({destroy:t});const e=Qt("sidebar"),o=new URL(e.sidebarAppUrl).origin,i=new qt(o),r=new Wo,s=new qo(document.body,r,e),a=new Ro(document.body,r,Qt("notebook"));i.on("frameConnected",((t,e)=>s.onFrameConnected(t,e))),n.push(i,s,a)}if("container"===fo()){const e=new po(t);n.push(e)}else{const o=new lo(document.body,t),i=new So(document.body,t,e);n.push(o,i)}zo.addEventListener("destroy",(()=>{n.forEach((t=>t.destroy()));document.querySelectorAll("[data-hypothesis-asset]").forEach((t=>t.remove()))}))}));
//# sourceMappingURL=annotator.bundle.js.map
